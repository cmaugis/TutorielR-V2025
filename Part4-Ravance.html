<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Tutoriel R - 4&nbsp; Pour aller plus loin avec R et RStudio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./Part3-StatR.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Part4-Ravance.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Pour aller plus loin avec R et RStudio</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Tutoriel R</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Part1-Intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Démarrer avec R et découverte de RStudio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Part2-InitR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Initiation au langage et objets de R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Part3-StatR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Statistique avec R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Part4-Ravance.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Pour aller plus loin avec R et RStudio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table des matières</h2>
   
  <ul>
  <li><a href="#le-package-tidyverse" id="toc-le-package-tidyverse" class="nav-link active" data-scroll-target="#le-package-tidyverse"><span class="header-section-number">4.1</span> Le package <strong>tidyverse</strong> <img src="image/logotidyverse.png" id="id" class="class img-fluid" style="width:10.0%"></a>
  <ul class="collapse">
  <li><a href="#principe" id="toc-principe" class="nav-link" data-scroll-target="#principe"><span class="header-section-number">4.1.1</span> Principe</a></li>
  <li><a href="#manipulation-de-variables-qualitatives-avec-forcats" id="toc-manipulation-de-variables-qualitatives-avec-forcats" class="nav-link" data-scroll-target="#manipulation-de-variables-qualitatives-avec-forcats"><span class="header-section-number">4.1.2</span> Manipulation de variables qualitatives avec <code>forcats</code> <img src="image/forcats.jpg" class="class img-fluid" style="width:10.0%"></a></li>
  <li><a href="#manipulation-avec-dplyr" id="toc-manipulation-avec-dplyr" class="nav-link" data-scroll-target="#manipulation-avec-dplyr"><span class="header-section-number">4.1.3</span> Manipulation avec <code>dplyr</code> <img src="image/dplyr.png" class="class img-fluid" style="width:10.0%"></a></li>
  <li><a href="#manipulation-de-chaines-de-caractère-avec-stringr" id="toc-manipulation-de-chaines-de-caractère-avec-stringr" class="nav-link" data-scroll-target="#manipulation-de-chaines-de-caractère-avec-stringr"><span class="header-section-number">4.1.4</span> Manipulation de chaines de caractère avec <code>stringr</code> <img src="image/stringr.png" class="class img-fluid" style="width:10.0%"></a></li>
  <li><a href="#visualisation-avec-ggplot2" id="toc-visualisation-avec-ggplot2" class="nav-link" data-scroll-target="#visualisation-avec-ggplot2"><span class="header-section-number">4.1.5</span> Visualisation avec <code>ggplot2</code> <img src="image/ggplot2.png" class="class img-fluid" style="width:10.0%"></a></li>
  </ul></li>
  <li><a href="#le-package-rmarkdown" id="toc-le-package-rmarkdown" class="nav-link" data-scroll-target="#le-package-rmarkdown"><span class="header-section-number">4.2</span> Le package <strong>rmarkdown</strong> <img src="image/rmarkdown.jpg" class="class img-fluid" style="width:10.0%"></a>
  <ul class="collapse">
  <li><a href="#etapes-de-création-dun-document" id="toc-etapes-de-création-dun-document" class="nav-link" data-scroll-target="#etapes-de-création-dun-document"><span class="header-section-number">4.2.1</span> Etapes de création d’un document</a></li>
  <li><a href="#sectEnTete" id="toc-sectEnTete" class="nav-link" data-scroll-target="#sectEnTete"><span class="header-section-number">4.2.2</span> Contenu de l’en-tête</a></li>
  <li><a href="#sec-Markdown" id="toc-sec-Markdown" class="nav-link" data-scroll-target="#sec-Markdown"><span class="header-section-number">4.2.3</span> Quelques éléments markdown</a></li>
  <li><a href="#sectChunk" id="toc-sectChunk" class="nav-link" data-scroll-target="#sectChunk"><span class="header-section-number">4.2.4</span> Options des blocs de code (chunks)</a></li>
  </ul></li>
  <li><a href="#rédaction-avec-quarto" id="toc-rédaction-avec-quarto" class="nav-link" data-scroll-target="#rédaction-avec-quarto"><span class="header-section-number">4.3</span> Rédaction avec <strong>Quarto</strong> <img src="image/quarto.png" class="class img-fluid" style="width:20.0%"></a>
  <ul class="collapse">
  <li><a href="#etapes-de-création-dun-document-1" id="toc-etapes-de-création-dun-document-1" class="nav-link" data-scroll-target="#etapes-de-création-dun-document-1"><span class="header-section-number">4.3.1</span> Etapes de création d’un document</a></li>
  <li><a href="#sectQuartoEnTete" id="toc-sectQuartoEnTete" class="nav-link" data-scroll-target="#sectQuartoEnTete"><span class="header-section-number">4.3.2</span> Contenu de l’en-tête</a></li>
  <li><a href="#contenu-du-document" id="toc-contenu-du-document" class="nav-link" data-scroll-target="#contenu-du-document"><span class="header-section-number">4.3.3</span> Contenu du document</a></li>
  </ul></li>
  <li><a href="#le-package-reticulate-pour-python" id="toc-le-package-reticulate-pour-python" class="nav-link" data-scroll-target="#le-package-reticulate-pour-python"><span class="header-section-number">4.4</span> Le package <strong>reticulate</strong> pour Python <img src="image/reticulate.png" class="class img-fluid" style="width:10.0%"></a>
  <ul class="collapse">
  <li><a href="#exemple-1" id="toc-exemple-1" class="nav-link" data-scroll-target="#exemple-1"><span class="header-section-number">4.4.1</span> Exemple 1</a></li>
  <li><a href="#exemple-2" id="toc-exemple-2" class="nav-link" data-scroll-target="#exemple-2"><span class="header-section-number">4.4.2</span> Exemple 2</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sectRavance" class="quarto-section-identifier"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Pour aller plus loin avec R et RStudio</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Dans ce tutoriel, nous allons aborder des points plus avancés de l’utilisation de R et RStudio. Nous allons donner quelques éléments sur le package <strong>tidyverse</strong>, en particulier des librairies <strong>ggplot2</strong>, <strong>dplyr</strong>, <strong>forcats</strong> et <strong>stringr</strong> qu’il contient. Dans une seconde partie, on abordera l’utilisation de <strong>Rmardown</strong> pour la rédaction de documents élégants contenant du texte, du code, des résultats d’execution, des expressions mathématiques en latex, …</p>
<section id="le-package-tidyverse" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="le-package-tidyverse"><span class="header-section-number">4.1</span> Le package <strong>tidyverse</strong> <img src="image/logotidyverse.png" id="id" class="class img-fluid" style="width:10.0%"></h2>
<section id="principe" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="principe"><span class="header-section-number">4.1.1</span> Principe</h3>
<p>Le terme <a href="https://www.tidyverse.org" target="_blank"><strong>tidyverse</strong></a> est une contraction de <strong>tidy</strong> (“bien rangé”) et de <strong>universe</strong>. C’est une collection d’extensions conçues pour travailler ensemble, avec des fonctions de syntaxe cohérente et compatibles, et basées sur une philosophie commune. Ces extensions sont en grande partie dues à <a href="http://hadley.nz/" target="_blank">Hadley Wickham</a>.</p>
<p>En installant le package <code>tidyverse</code>, on installe plusieurs extensions qui constituent le “coeur” :</p>
<ul>
<li><code>ggplot2</code> (visualisation)</li>
<li><code>dplyr</code> (manipulation des données)</li>
<li><code>tidyr</code> (remise en forme des données)</li>
<li><code>purrr</code> (programmation)</li>
<li><code>readr</code> (importation de données)</li>
<li><code>tibble</code> (tableaux de données)</li>
<li><code>forcats</code> (variables qualitatives)</li>
<li><code>stringr</code> (chaînes de caractères)</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="image/tidyverse.png" class="img-fluid figure-img" style="width:35.0%"></p>
<figcaption class="figure-caption">Librairies dans tidyverse</figcaption>
</figure>
</div>
</div>
</div>
<p>Elles sont automatiquement chargées avec la commande <code>library(tidyverse)</code>. On peut aussi les charger une à une (par exemple <code>library(ggplot2)</code>). La liste complète des extensions de tidyverse se trouve sur le <a href="https://www.tidyverse.org/" target="_blank">site officiel du tidyverse</a>.</p>
<p>La philosophie de tidyverse est basée sur le concept de <em>tidy data</em>, développé à l’origine par Hadley Wickham dans l’article <em>“Tidy Data.” Journal of Statistical Software</em> <span class="citation" data-cites="wickham2014tidy">(<a href="references.html#ref-wickham2014tidy" role="doc-biblioref">2014</a>)</span>. L’idée est d’organiser les données pour faciliter le travail de préparation des données avant l’analyse statistique. Les principes des données <em>tidy</em> sont :</p>
<ul>
<li>chaque variable est une colonne</li>
<li>chaque observation est une ligne</li>
<li>chaque type d’observation est dans une table différente</li>
</ul>
<p>Une autre particularité du tidyverse est que les packages de tidyverse travaillent avec des tableaux de données de type <code>tibble</code> (géré avec le package du même nom), qui est une évolution du format data.frame de R. On peut convertir un data.frame en tibble avec la commande <code>as_tibble()</code>, et un tibble en data.frame avec <code>as.data.frame()</code>.</p>
<p>Pour la suite de ce tutoriel, installez et chargez la librairie <strong>tidyverse</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pour la suite, nous utiliserons le jeu de données <strong>wine</strong> disponible dans le dossier <em>“Data/”</em> , qui nous a déjà servi dans la partie 3.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Wine<span class="ot">=</span><span class="fu">read.table</span>(<span class="st">"Data/wine.txt"</span>,<span class="at">header=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Wine)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Qualite Type AcidVol AcidCitr SO2lbr SO2tot Densite Alcool
1352  medium    1    0.62     0.01      8     46 0.99332   11.8
5493  medium    0    0.34     0.10     17     63 0.99370    9.2
5153  medium    0    0.22     0.22     39    110 0.99855    9.0
5308  medium    0    0.35     0.46     61    183 0.99786    9.0
3866  medium    0    0.42     0.32     20    167 0.99479   10.6
694   medium    1    0.48     0.32     21    122 0.99840    9.4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(Wine)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">has_rownames</span>(Wine)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>Wine.tbl <span class="ot">=</span> <span class="fu">as_tibble</span>(<span class="fu">rownames_to_column</span>(Wine))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>Wine.tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 600 × 9
   rowname Qualite  Type AcidVol AcidCitr SO2lbr SO2tot Densite Alcool
   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;
 1 1352    medium      1    0.62     0.01      8     46   0.993   11.8
 2 5493    medium      0    0.34     0.1      17     63   0.994    9.2
 3 5153    medium      0    0.22     0.22     39    110   0.999    9  
 4 5308    medium      0    0.35     0.46     61    183   0.998    9  
 5 3866    medium      0    0.42     0.32     20    167   0.995   10.6
 6 694     medium      1    0.48     0.32     21    122   0.998    9.4
 7 5085    good        0    0.21     0.32     39    113   0.994   10.2
 8 2280    medium      0    0.28     0.14     64    159   0.992   10  
 9 5231    medium      0    0.3      0.25     21    124   0.994   10.8
10 4388    medium      0    0.4      0.42     41    176   0.996    9.4
# ℹ 590 more rows</code></pre>
</div>
</div>
</section>
<section id="manipulation-de-variables-qualitatives-avec-forcats" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="manipulation-de-variables-qualitatives-avec-forcats"><span class="header-section-number">4.1.2</span> Manipulation de variables qualitatives avec <code>forcats</code> <img src="image/forcats.jpg" class="class img-fluid" style="width:10.0%"></h3>
<p>Les variables qualitatives peuvent être de deux types sous R, <code>character</code>et <code>factor</code>, ce qui amène parfois à des erreurs de manipulation et d’utilisation de fonctions non adaptées au type de la variable qualitative étudiée. <a href="https://forcats.tidyverse.org/" target="_blank"><strong>forcats</strong></a> est une extension de tidyverse qui permet de faciliter la manipulation des variables qualitatives quelque soit leur type. Voici quelques fonctions utiles de <code>forcast</code> :</p>
<ul>
<li><code>fct_recode()</code> : permet de recoder les modalités d’une variable qualitative</li>
<li><code>fct_collapse()</code> : permet de regrouper des modalités</li>
<li><code>fct_other()</code>: permet de regrouper une liste de modalités dans une seule modalité “Other”</li>
<li><code>fct_lump()</code>: permet de regrouper automatiquement les modalités les moins fréquentes (seuil modifiable) en une seule modalité “Other”</li>
<li><code>fct_explicit_na()</code>: permet de recoder les données manquantes <code>NA</code> en une modalité choisie</li>
<li><code>fct_relevel()</code> : permet d’ordonner manuellement les modalités d’une variable qualitative</li>
<li><code>fct_reorder()</code>: permet d’ordonner les modalités d’une variable qualitative en fonction d’une autre variable à laquelle on applique une fonction donnée en argument</li>
<li><code>fct_infreq()</code> : permet d’ordonner les modalités selon les effectifs</li>
</ul>
<p>L’extension <a href="https://juba.github.io/questionr/" target="_blank"><strong>questionr</strong></a> propose une interface graphique pour recoder les modalités d’une variable qualitative. On peut aussi se servir de cette interface pour découper une variable quantitative en classes (pour faire comme la fonction <code>cut()</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(questionr)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>Wine<span class="sc">$</span>Type<span class="ot">=</span><span class="fu">as.factor</span>(Wine<span class="sc">$</span>Type)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>Wine<span class="sc">$</span>Type<span class="ot">=</span><span class="fu">fct_recode</span>(Wine<span class="sc">$</span>Type,<span class="st">"blanc"</span><span class="ot">=</span><span class="st">"0"</span>,<span class="st">"rouge"</span><span class="ot">=</span><span class="st">"1"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">freq</span>(Wine<span class="sc">$</span>Type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        n    % val%
blanc 425 70.8 70.8
rouge 175 29.2 29.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq</span>(Wine<span class="sc">$</span>Qualite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         n    % val%
bad     19  3.2  3.2
good   110 18.3 18.3
medium 471 78.5 78.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>Qualite <span class="ot">=</span> <span class="fu">fct_recode</span>(Wine<span class="sc">$</span>Qualite,<span class="st">"mauvais"</span><span class="ot">=</span><span class="st">"bad"</span>,<span class="st">"bon"</span><span class="ot">=</span><span class="st">"good"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">freq</span>(Qualite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          n    % val%
mauvais  19  3.2  3.2
bon     110 18.3 18.3
medium  471 78.5 78.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">freq</span>(<span class="fu">fct_relevel</span>(Wine<span class="sc">$</span>Qualite, <span class="st">"good"</span>,<span class="st">"bad"</span>,<span class="st">"medium"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         n    % val%
good   110 18.3 18.3
bad     19  3.2  3.2
medium 471 78.5 78.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Wine)<span class="sc">+</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(Qualite, Alcool, median), </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">y =</span> Alcool))<span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Qualite"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Wine) <span class="sc">+</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_infreq</span>(Qualite)))<span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Qualite"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-7-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="manipulation-avec-dplyr" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="manipulation-avec-dplyr"><span class="header-section-number">4.1.3</span> Manipulation avec <code>dplyr</code> <img src="image/dplyr.png" class="class img-fluid" style="width:10.0%"></h3>
<p><a href="https://dplyr.tidyverse.org/" target="_blank"><strong>dplyr</strong></a> est une extension pour le traitement et la manipulation de données contenues dans un ou plusieurs tableaux. Elle considère que les données sont organisées selon le <em>tidy data</em>, ses fonctions s’appliquent sur des <code>tibble</code> ou des <code>data.frame</code> et renvoient le résultat sous forme d’un <code>tibble</code>. Nous allons illustrer ici les fonctions principales disponibles dans <code>dplyr</code>.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true"><code>slice()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false"><code>filter()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false"><code>select()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false"><code>arrange()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false">Le <em>pipe</em> <code>%&gt;%</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-6" role="tab" aria-controls="tabset-1-6" aria-selected="false"><code>if_else()</code> / <code>case_when()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-7" role="tab" aria-controls="tabset-1-7" aria-selected="false"><code>group_by()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-8" role="tab" aria-controls="tabset-1-8" aria-selected="false"><code>summarise()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-9-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-9" role="tab" aria-controls="tabset-1-9" aria-selected="false"><code>mutate() / transmute()</code></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>La fonction <code>slice()</code> permet de sélectionner des lignes du tableau selon leur position. Par exemple si on souhaite accéder à la 20ème ligne du jeu de données <em>Wine</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slice</span>(Wine.tbl,<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 9
  rowname Qualite  Type AcidVol AcidCitr SO2lbr SO2tot Densite Alcool
  &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;
1 6420    medium      0    0.36      0.5     63    178   0.992    9.7</code></pre>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>La fonction <code>filter()</code> filtre les lignes d’une table selon une condition. Seules les lignes pour lesquelles le test renvoie <code>TRUE</code> sont conservées.</p>
<p>Par exemple, si on veut ne conserver que les vins de Qualité “medium” :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(Wine.tbl,Qualite<span class="sc">==</span><span class="st">"medium"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 471 × 9
   rowname Qualite  Type AcidVol AcidCitr SO2lbr SO2tot Densite Alcool
   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;
 1 1352    medium      1    0.62     0.01      8     46   0.993   11.8
 2 5493    medium      0    0.34     0.1      17     63   0.994    9.2
 3 5153    medium      0    0.22     0.22     39    110   0.999    9  
 4 5308    medium      0    0.35     0.46     61    183   0.998    9  
 5 3866    medium      0    0.42     0.32     20    167   0.995   10.6
 6 694     medium      1    0.48     0.32     21    122   0.998    9.4
 7 2280    medium      0    0.28     0.14     64    159   0.992   10  
 8 5231    medium      0    0.3      0.25     21    124   0.994   10.8
 9 4388    medium      0    0.4      0.42     41    176   0.996    9.4
10 4172    medium      0    0.14     0.28     10     56   0.994    9.9
# ℹ 461 more rows</code></pre>
</div>
</div>
<p>Si on veut ne conserver que les vins avec au moins 11 degrés d’alcool et une teneur en acide volatile de moins de 0.3 :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(Wine.tbl,Alcool<span class="sc">&gt;=</span><span class="dv">11</span> <span class="sc">&amp;</span> AcidVol<span class="sc">&lt;</span><span class="fl">0.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 99 × 9
   rowname Qualite  Type AcidVol AcidCitr SO2lbr SO2tot Densite Alcool
   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;
 1 2155    good        0    0.25     0.34     31     93   0.992   11.3
 2 2258    medium      0    0.27     0.25     41    188   0.992   11.3
 3 4560    good        0    0.11     0.34     41    114   0.996   11  
 4 5430    good        0    0.26     0.23     23    111   0.993   11.5
 5 6496    good        0    0.29     0.3      20    110   0.989   12.8
 6 3046    medium      0    0.27     0.49     35     92   0.991   12.2
 7 4690    medium      0    0.17     0.35     33     78   0.991   11.3
 8 4799    good        0    0.21     0.4      40    121   0.992   12  
 9 5167    medium      0    0.26     0.27     20     80   0.991   11.5
10 5291    medium      0    0.22     0.26     23    112   0.993   11.4
# ℹ 89 more rows</code></pre>
</div>
</div>
<p>Si on veut filtrer les vins ayant un taux d’alcool entre 10.5 et 11 :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(Wine.tbl,<span class="fu">between</span>(Alcool,<span class="fl">10.5</span>,<span class="dv">11</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 94 × 9
   rowname Qualite  Type AcidVol AcidCitr SO2lbr SO2tot Densite Alcool
   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;
 1 3866    medium      0    0.42     0.32     20    167   0.995   10.6
 2 5231    medium      0    0.3      0.25     21    124   0.994   10.8
 3 4560    good        0    0.11     0.34     41    114   0.996   11  
 4 3615    medium      0    0.19     0.39     22     84   0.994   10.8
 5 2983    medium      0    0.36     0.56     25    102   0.992   10.5
 6 6347    medium      0    0.26     0.5      25     93   0.994   10.5
 7 3003    good        0    0.26     0.31     29    128   0.994   10.9
 8 1291    medium      1    0.74     0         6     12   0.995   11  
 9 1350    medium      1    0.57     0        21     41   0.995   10.8
10 6336    medium      0    0.16     0.36     13     61   0.991   10.8
# ℹ 84 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>La fonction <code>select()</code> permet de sélectionner des colonnes d’une table. Nous donnons quelques exemples ci-dessous. On renvoie à l’aide <code>?select</code> pour voir les options disponibles pour sélectionner plusieurs colonnes, sélectionner selon une condition sur les noms, … On peut aussi utiliser la fonction <code>rename()</code> (voir l’aide.)</p>
<p>Dans notre exemple, si on veut récupérer les variables <em>Alcool</em> et <em>Qualite</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(Wine.tbl,Alcool,Qualite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 600 × 2
   Alcool Qualite
    &lt;dbl&gt; &lt;chr&gt;  
 1   11.8 medium 
 2    9.2 medium 
 3    9   medium 
 4    9   medium 
 5   10.6 medium 
 6    9.4 medium 
 7   10.2 good   
 8   10   medium 
 9   10.8 medium 
10    9.4 medium 
# ℹ 590 more rows</code></pre>
</div>
</div>
<p>Si on veut éliminer les variables <em>AcidVol</em> et <em>SO2tot</em> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(Wine.tbl,<span class="sc">-</span>AcidVol,<span class="sc">-</span>SO2tot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 600 × 7
   rowname Qualite  Type AcidCitr SO2lbr Densite Alcool
   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;    &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
 1 1352    medium      1     0.01      8   0.993   11.8
 2 5493    medium      0     0.1      17   0.994    9.2
 3 5153    medium      0     0.22     39   0.999    9  
 4 5308    medium      0     0.46     61   0.998    9  
 5 3866    medium      0     0.32     20   0.995   10.6
 6 694     medium      1     0.32     21   0.998    9.4
 7 5085    good        0     0.32     39   0.994   10.2
 8 2280    medium      0     0.14     64   0.992   10  
 9 5231    medium      0     0.25     21   0.994   10.8
10 4388    medium      0     0.42     41   0.996    9.4
# ℹ 590 more rows</code></pre>
</div>
</div>
<p>Si on veut récupérer les colonnes dont le nom commence par <em>Acid</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(Wine.tbl,<span class="fu">starts_with</span>(<span class="st">"Acid"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 600 × 2
   AcidVol AcidCitr
     &lt;dbl&gt;    &lt;dbl&gt;
 1    0.62     0.01
 2    0.34     0.1 
 3    0.22     0.22
 4    0.35     0.46
 5    0.42     0.32
 6    0.48     0.32
 7    0.21     0.32
 8    0.28     0.14
 9    0.3      0.25
10    0.4      0.42
# ℹ 590 more rows</code></pre>
</div>
</div>
<p>Si on veut récupérer les colonnes qui contiennent <em>Acid</em> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(Wine.tbl,<span class="fu">contains</span>(<span class="st">"Acid"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 600 × 2
   AcidVol AcidCitr
     &lt;dbl&gt;    &lt;dbl&gt;
 1    0.62     0.01
 2    0.34     0.1 
 3    0.22     0.22
 4    0.35     0.46
 5    0.42     0.32
 6    0.48     0.32
 7    0.21     0.32
 8    0.28     0.14
 9    0.3      0.25
10    0.4      0.42
# ℹ 590 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<p>La fonction `<code>arrange()</code> permet de réordonner les lignes du jeu de données en fonction d’une ou plusieurs variables.</p>
<p>Par exemple, pour ordonner les lignes de <em>Wine</em> en fonction des valeurs de la variable <em>Alcool</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(Wine.tbl,Alcool)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 600 × 9
   rowname Qualite  Type AcidVol AcidCitr SO2lbr SO2tot Densite Alcool
   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;
 1 4225    medium      0    0.19     0.21     89    159   0.993    8  
 2 3185    medium      0    0.3      0.74     46    165   0.998    8.7
 3 2830    medium      0    0.29     0.3      46    238   0.999    8.7
 4 5650    good        0    0.16     0.27     25    135   0.998    8.7
 5 5278    medium      0    0.23     0.25     19    111   1.00     8.7
 6 1741    medium      0    0.37     0.67     49    155   0.998    8.7
 7 1684    medium      0    0.43     0.61     54    155   0.997    8.7
 8 1737    medium      0    0.37     0.67     49    155   0.998    8.7
 9 3258    medium      0    0.31     0.49     52    220   0.996    8.8
10 1477    medium      1    0.5      0.5      48     82   1.00     8.8
# ℹ 590 more rows</code></pre>
</div>
</div>
<p>Pour trier par ordre décroissant, on utilise la fonction <code>desc()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(Wine.tbl,<span class="fu">desc</span>(Alcool))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 600 × 9
   rowname Qualite  Type AcidVol AcidCitr SO2lbr SO2tot Densite Alcool
   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;
 1 5504    good        0   0.455     0.18     33    106   0.987   14  
 2 6389    medium      0   0.62      0.33     24    118   0.988   13.6
 3 5729    good        0   0.34      0.31     18     68   0.990   13.4
 4 5103    good        0   0.33      0.31     21     93   0.990   13.4
 5 5795    good        0   0.45      0.24     24     87   0.989   13.4
 6 492     good        1   0.41      0.5      12     25   0.995   13.3
 7 4973    good        0   0.28      0.24     49    121   0.989   13.2
 8 6437    medium      0   0.28      0.38     54    216   0.992   13.1
 9 5099    good        0   0.33      0.3      30    124   0.989   13.1
10 1288    medium      1   0.6       0.08      3      7   0.993   13  
# ℹ 590 more rows</code></pre>
</div>
</div>
<p>Pour trier selon les deux variables <em>Qualite</em> et <em>Alcool</em> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(Wine.tbl,Qualite,Alcool)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 600 × 9
   rowname Qualite  Type AcidVol AcidCitr SO2lbr SO2tot Densite Alcool
   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;
 1 5812    bad         0    0.31     0.37     13    164   0.996    8.8
 2 3937    bad         0    0.28     0.35     61    180   0.997    9  
 3 460     bad         1    0.58     0.66     10     47   1.00     9  
 4 2226    bad         0    0.56     0.12     22    177   0.998    9.1
 5 2262    bad         0    0.57     0.1      23    188   0.997    9.2
 6 4131    bad         0    0.54     0.27      8    178   0.995    9.4
 7 3074    bad         0    0.25     0.24     13     85   0.994    9.5
 8 1646    bad         0    0.45     0.26     63    206   0.994    9.8
 9 4000    bad         0    0.19     0.42     16    104   0.995   10  
10 4001    bad         0    0.16     0.49     18    107   0.995   10.2
# ℹ 590 more rows</code></pre>
</div>
</div>
<p>On peut remarquer que l’on obtient le même résultat avec la commande</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>Wine.tbl <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Qualite,Alcool)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 600 × 9
   rowname Qualite  Type AcidVol AcidCitr SO2lbr SO2tot Densite Alcool
   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;
 1 5812    bad         0    0.31     0.37     13    164   0.996    8.8
 2 3937    bad         0    0.28     0.35     61    180   0.997    9  
 3 460     bad         1    0.58     0.66     10     47   1.00     9  
 4 2226    bad         0    0.56     0.12     22    177   0.998    9.1
 5 2262    bad         0    0.57     0.1      23    188   0.997    9.2
 6 4131    bad         0    0.54     0.27      8    178   0.995    9.4
 7 3074    bad         0    0.25     0.24     13     85   0.994    9.5
 8 1646    bad         0    0.45     0.26     63    206   0.994    9.8
 9 4000    bad         0    0.19     0.42     16    104   0.995   10  
10 4001    bad         0    0.16     0.49     18    107   0.995   10.2
# ℹ 590 more rows</code></pre>
</div>
</div>
<p>Cette commande <em>pipe</em> <code>%&gt;%</code> est importante dans dplyr.</p>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<p>On est souvent amené à enchaîner plusieurs opérations sur un tableau. Par exemple,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="fu">select</span>(<span class="fu">filter</span>(Wine.tbl,Alcool<span class="sc">&gt;=</span><span class="dv">11</span>),Qualite,Alcool),Qualite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 205 × 2
   Qualite Alcool
   &lt;chr&gt;    &lt;dbl&gt;
 1 bad       11.5
 2 bad       11.6
 3 bad       11.5
 4 bad       11.2
 5 bad       11.2
 6 good      12.7
 7 good      11.3
 8 good      11  
 9 good      11.5
10 good      12.8
# ℹ 195 more rows</code></pre>
</div>
</div>
<p>mais cet enchainement de fonctions est peu lisible. On peut améliorer la lisibilité du code en utilisant le <em>pipe</em>, noté <code>%&gt;%</code>. Si on execute `<code>expr%&gt;%f</code>, le résultat de <code>expr</code> est passé comme premier argument de la fonction <code>f</code>, ce qui revient à executer <code>f(expr)</code>. Ainsi notre exemple précédent peut se réécrire avec le code suivant :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>Wine.tbl <span class="sc">%&gt;%</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Alcool<span class="sc">&gt;=</span><span class="dv">11</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Qualite,Alcool) <span class="sc">%&gt;%</span> </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Qualite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 205 × 2
   Qualite Alcool
   &lt;chr&gt;    &lt;dbl&gt;
 1 bad       11.5
 2 bad       11.6
 3 bad       11.5
 4 bad       11.2
 5 bad       11.2
 6 good      12.7
 7 good      11.3
 8 good      11  
 9 good      11.5
10 good      12.8
# ℹ 195 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-1-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-6-tab">
<p>Ces fonctions permettent de créer une nouvelle variable à partir d’une ou plusieurs variables existantes en faisant un ou des tests. La fonction <code>if_else()</code> prend en argument un test, une valeur à renvoyer si le test est vrai, et une valeur à renvoyer si le test est faux. <code>case_when()</code> généralise <code>if_else()</code> en permettant de considérer plusieurs tests et leurs valeurs associées en même temps. Mais attention, les conditions étant testées l’une après l’autre, l’ordre des tests est important.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">cbind</span>(Wine<span class="sc">$</span>Alcool,<span class="fu">if_else</span>(Wine<span class="sc">$</span>Alcool<span class="sc">&gt;</span><span class="dv">11</span>,<span class="st">"Alcool sup. à 11"</span>, <span class="st">"Alcool inf. à 11"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]   [,2]              
[1,] "11.8" "Alcool sup. à 11"
[2,] "9.2"  "Alcool inf. à 11"
[3,] "9"    "Alcool inf. à 11"
[4,] "9"    "Alcool inf. à 11"
[5,] "10.6" "Alcool inf. à 11"
[6,] "9.4"  "Alcool inf. à 11"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>new <span class="ot">&lt;-</span> <span class="fu">case_when</span>(</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    Wine<span class="sc">$</span>Alcool <span class="sc">&gt;</span> <span class="dv">11</span> <span class="sc">&amp;</span> Wine<span class="sc">$</span>Type <span class="sc">==</span> <span class="st">"rouge"</span> <span class="sc">~</span> <span class="st">"vins rouges de degré sup. à 11"</span>,</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    Wine<span class="sc">$</span>Alcool <span class="sc">&gt;</span> <span class="dv">11</span> <span class="sc">&amp;</span> Wine<span class="sc">$</span>Type <span class="sc">==</span> <span class="st">"blanc"</span>  <span class="sc">~</span> <span class="st">"vins blancs de degré sup. à 11"</span>,</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Autre"</span>)</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="fu">freq</span>(new)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                 n    % val%
Autre                          413 68.8 68.8
vins blancs de degré sup. à 11 142 23.7 23.7
vins rouges de degré sup. à 11  45  7.5  7.5</code></pre>
</div>
</div>
</div>
<div id="tabset-1-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-7-tab">
<p>La fonction <code>group_by()</code> permet de créer des groupes de lignes à partir des valeurs d’une ou plusieurs variables. Par exemple on peut regrouper les vins selon leur qualité :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>Wine.tbl <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Qualite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 600 × 9
# Groups:   Qualite [3]
   rowname Qualite  Type AcidVol AcidCitr SO2lbr SO2tot Densite Alcool
   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;
 1 1352    medium      1    0.62     0.01      8     46   0.993   11.8
 2 5493    medium      0    0.34     0.1      17     63   0.994    9.2
 3 5153    medium      0    0.22     0.22     39    110   0.999    9  
 4 5308    medium      0    0.35     0.46     61    183   0.998    9  
 5 3866    medium      0    0.42     0.32     20    167   0.995   10.6
 6 694     medium      1    0.48     0.32     21    122   0.998    9.4
 7 5085    good        0    0.21     0.32     39    113   0.994   10.2
 8 2280    medium      0    0.28     0.14     64    159   0.992   10  
 9 5231    medium      0    0.3      0.25     21    124   0.994   10.8
10 4388    medium      0    0.4      0.42     41    176   0.996    9.4
# ℹ 590 more rows</code></pre>
</div>
</div>
<p>Dans l’affichage, on voit apparaitre “Groups” dans les premières lignes, le reste n’a pas changé. Mais une fois les groupes créés, ils peuvent être utilisés dans les différentes fonctions de <code>dplyr</code> SAUF pour <code>arrange()</code>.</p>
<p>Si on veut grouper selon plusieurs variables, il suffit de les passer en argument de <code>group_by()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>Wine.tbl <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Qualite,Type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 600 × 9
# Groups:   Qualite, Type [6]
   rowname Qualite  Type AcidVol AcidCitr SO2lbr SO2tot Densite Alcool
   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;
 1 1352    medium      1    0.62     0.01      8     46   0.993   11.8
 2 5493    medium      0    0.34     0.1      17     63   0.994    9.2
 3 5153    medium      0    0.22     0.22     39    110   0.999    9  
 4 5308    medium      0    0.35     0.46     61    183   0.998    9  
 5 3866    medium      0    0.42     0.32     20    167   0.995   10.6
 6 694     medium      1    0.48     0.32     21    122   0.998    9.4
 7 5085    good        0    0.21     0.32     39    113   0.994   10.2
 8 2280    medium      0    0.28     0.14     64    159   0.992   10  
 9 5231    medium      0    0.3      0.25     21    124   0.994   10.8
10 4388    medium      0    0.4      0.42     41    176   0.996    9.4
# ℹ 590 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-1-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-8-tab">
<p>La fonction <code>summarise()</code> permet de calculer quelques indicateurs statistiques sur une ou plusieurs variables. Par exemple, si on veut connaitre la teneur moyenne en acide volatile de tous les vins</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>Wine.tbl <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">AcidVolmean =</span> <span class="fu">mean</span>(AcidVol, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  AcidVolmean
        &lt;dbl&gt;
1       0.351</code></pre>
</div>
</div>
<p>Si on veut maintenant la teneur moyenne en acide volatile sur tous les vins regroupés par qualité :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>Wine.tbl <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Qualite)<span class="sc">%&gt;%</span><span class="fu">summarise</span>(<span class="at">AcidVolmean =</span> <span class="fu">mean</span>(AcidVol,<span class="at">na.rm=</span>T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  Qualite AcidVolmean
  &lt;chr&gt;         &lt;dbl&gt;
1 bad           0.423
2 good          0.303
3 medium        0.360</code></pre>
</div>
</div>
<p>On veut également calculer la teneur en acide volatile minimale et maximale dans chaque groupe :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>Wine.tbl <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Qualite)<span class="sc">%&gt;%</span><span class="fu">summarise</span>(<span class="at">AcidVolmean =</span> <span class="fu">mean</span>(AcidVol,<span class="at">na.rm=</span>T),</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">AcidVolmin=</span><span class="fu">min</span>(AcidVol,<span class="at">na.rm=</span>T),</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">AcidVolmax=</span><span class="fu">max</span>(AcidVol,<span class="at">na.rm=</span>T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  Qualite AcidVolmean AcidVolmin AcidVolmax
  &lt;chr&gt;         &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1 bad           0.423       0.16      0.63 
2 good          0.303       0.1       0.915
3 medium        0.360       0.12      1.04 </code></pre>
</div>
</div>
<p><code>summarise()</code> possède un opérateur <code>n()</code> pour connaître le nombre de lignes par groupe :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>Wine.tbl <span class="sc">%&gt;%</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Qualite) <span class="sc">%&gt;%</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nb =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  Qualite    nb
  &lt;chr&gt;   &lt;int&gt;
1 bad        19
2 good      110
3 medium    471</code></pre>
</div>
</div>
<p><code>n()</code> peut aussi être utilisé avec <code>filter()</code> et <code>mutate()</code>. On peut aussi directement utiliser la fonction <code>count()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>Wine.tbl <span class="sc">%&gt;%</span><span class="fu">count</span>(Qualite) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  Qualite     n
  &lt;chr&gt;   &lt;int&gt;
1 bad        19
2 good      110
3 medium    471</code></pre>
</div>
</div>
</div>
<div id="tabset-1-9" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-9-tab">
<p><code>mutate()</code> permet de créer de nouvelles variables (colonnes) dans le tableau en conservant toutes les autres variables existantes. Par exemple, si on convertit la densité, qui est donnée en g/cm3, en mg/cm3 :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>Wine.tbl <span class="ot">=</span> <span class="fu">mutate</span>(Wine.tbl, <span class="at">densmg =</span> <span class="dv">1000</span> <span class="sc">*</span> Densite)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(Wine.tbl,Densite,densmg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 600 × 2
   Densite densmg
     &lt;dbl&gt;  &lt;dbl&gt;
 1   0.993   993.
 2   0.994   994.
 3   0.999   999.
 4   0.998   998.
 5   0.995   995.
 6   0.998   998.
 7   0.994   994.
 8   0.992   992 
 9   0.994   994.
10   0.996   996.
# ℹ 590 more rows</code></pre>
</div>
</div>
<p>La fonction <code>transmute()</code> permet également d’ajouter une variable mais en supprimant les autres cette fois.</p>
</div>
</div>
</div>
</section>
<section id="manipulation-de-chaines-de-caractère-avec-stringr" class="level3" data-number="4.1.4">
<h3 data-number="4.1.4" class="anchored" data-anchor-id="manipulation-de-chaines-de-caractère-avec-stringr"><span class="header-section-number">4.1.4</span> Manipulation de chaines de caractère avec <code>stringr</code> <img src="image/stringr.png" class="class img-fluid" style="width:10.0%"></h3>
<p><a href="https://stringr.tidyverse.org/" target="_blank"><strong>stringr</strong></a> est une extension pour la manipulation de chaînes de caractères. On présente ici les fonctions les plus utilisées, qui seront illustrées sur l’exemple suivant :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>ExChaine <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">nom =</span> <span class="fu">c</span>(<span class="st">"M. Gérard MARTIN"</span>, <span class="st">"Mme Marie DUPONT"</span>, <span class="st">"M. Rémi THOMAS"</span>),</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">adresse =</span> <span class="fu">c</span>(<span class="st">"30 avenue de la République"</span>, <span class="st">"40 rue de la Libération"</span>, <span class="st">"2 impasse des pivoines"</span>),</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">ville =</span> <span class="fu">c</span>(<span class="st">"Toulouse"</span>, <span class="st">"Marseille"</span>, <span class="st">"Bordeaux"</span>) </span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>ExChaine</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  nom              adresse                    ville    
  &lt;chr&gt;            &lt;chr&gt;                      &lt;chr&gt;    
1 M. Gérard MARTIN 30 avenue de la République Toulouse 
2 Mme Marie DUPONT 40 rue de la Libération    Marseille
3 M. Rémi THOMAS   2 impasse des pivoines     Bordeaux </code></pre>
</div>
</div>
<p>Pour plus de détails vous pouvez vous référer au chapitre 14 du livre de Wickham, H. et G. Grolemund <span class="citation" data-cites="RDataScience">(<a href="references.html#ref-RDataScience" role="doc-biblioref">2016</a>)</span> dédié à la librairie <code>stringr</code> ainsi qu’au <a href="https://stringr.tidyverse.org/" target="_blank">site web officiel de stringr</a>.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true"><code>str_length()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false"><code>str_c()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false"><code>str_to_lower()</code> / <code>str_to_upper')</code> / <code>str_to_title()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false"><code>str_sub()</code> / <code>str_extract()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-5" role="tab" aria-controls="tabset-2-5" aria-selected="false"><code>str_detect()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-6" role="tab" aria-controls="tabset-2-6" aria-selected="false"><code>str_split()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-7" role="tab" aria-controls="tabset-2-7" aria-selected="false"><code>str_replace()</code></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>La fonction <code>str_length()</code> permet d’obtenir la longueur d’une chaîne / tableau de caractères :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(ExChaine)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in stri_length(string): argument is not an atomic vector; coercing</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 59 84 38</code></pre>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>La fonction <code>str_c()</code> est la fonction de <code>stringr</code> dédiée à la concaténation des chaines de caractères. On a déjà vu la fonction <code>paste()</code>de R. Voici quelques exemples :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(ExChaine<span class="sc">$</span>nom,ExChaine<span class="sc">$</span>ville,<span class="at">sep=</span><span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "M. Gérard MARTIN Toulouse"  "Mme Marie DUPONT Marseille"
[3] "M. Rémi THOMAS Bordeaux"   </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(ExChaine<span class="sc">$</span>nom,ExChaine<span class="sc">$</span>ville,<span class="at">sep=</span><span class="st">"/-/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "M. Gérard MARTIN/-/Toulouse"  "Mme Marie DUPONT/-/Marseille"
[3] "M. Rémi THOMAS/-/Bordeaux"   </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(ExChaine<span class="sc">$</span>nom,<span class="fu">c</span>(<span class="st">" "</span>,<span class="st">"/---/"</span>,<span class="st">"!!!"</span>),ExChaine<span class="sc">$</span>ville)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "M. Gérard MARTIN Toulouse"      "Mme Marie DUPONT/---/Marseille"
[3] "M. Rémi THOMAS!!!Bordeaux"     </code></pre>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<p>Les fonctions <code>str_to_lower()</code>, <code>str_to_upper()</code> et <code>str_to_title()</code> permettent de mettre en minuscules, en majuscules, ou en lettres capitales respectivement les éléments d’une chaînes de caractères</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(ExChaine<span class="sc">$</span>nom)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "m. gérard martin" "mme marie dupont" "m. rémi thomas"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(ExChaine<span class="sc">$</span>nom)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "M. GÉRARD MARTIN" "MME MARIE DUPONT" "M. RÉMI THOMAS"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_title</span>(ExChaine<span class="sc">$</span>nom)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "M. Gérard Martin" "Mme Marie Dupont" "M. Rémi Thomas"  </code></pre>
</div>
</div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<p>La fonction <code>str_sub()</code> permet d’extraire des sous-chaînes de caractères en indiquant les positions des premier et dernier caractères :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(ExChaine<span class="sc">$</span>nom,<span class="dv">3</span>,<span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Gérard" "e Marie" " Rémi T"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(ExChaine<span class="sc">$</span>nom,<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Gérard MARTIN" "e Marie DUPONT" " Rémi THOMAS"  </code></pre>
</div>
</div>
<p>La fonction <code>str_extract()</code> permet d’extraire les valeurs correspondant à un motif.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(ExChaine,<span class="st">"pivoines"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in stri_extract_first_regex(string, pattern, opts_regex =
opts(pattern)): argument is not an atomic vector; coercing</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA         "pivoines" NA        </code></pre>
</div>
</div>
<p>Plus subtil, cette commande permet de récupérer tous les numéros des adresses :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(ExChaine<span class="sc">$</span>adresse, <span class="st">"^</span><span class="sc">\\</span><span class="st">d+"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "30" "40" "2" </code></pre>
</div>
</div>
<p>Pour aller plus loin, vous pouvez consulter les références donner pour la librairie <code>stringr</code>.</p>
</div>
<div id="tabset-2-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-5-tab">
<p>La fonction <code>str_detect()</code> permet de détecter la présence d’un motif parmi les élements d’un vecteur de caractères. Elle renvoie un vecteur de booléens.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(ExChaine<span class="sc">$</span>nom,<span class="st">"o"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(ExChaine<span class="sc">$</span>nom,<span class="st">"r"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(ExChaine<span class="sc">$</span>nom),<span class="st">"r"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE</code></pre>
</div>
</div>
<p>La fonction <code>str_count()</code> dénombre les occurences d’un motif dans un vecteur de caractères.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(ExChaine<span class="sc">$</span>nom,<span class="st">"r"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 1 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(<span class="fu">str_to_lower</span>(ExChaine<span class="sc">$</span>nom),<span class="st">"r"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 1 1</code></pre>
</div>
</div>
</div>
<div id="tabset-2-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-6-tab">
<p>La fonction <code>str_split()</code> permet de découper une chaîne de caractère (premier argument) en fonction d’un délimiteur (second argument).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(ExChaine,<span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in stri_split_regex(string, pattern, n = n, simplify = simplify, :
argument is not an atomic vector; coercing</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "c(\"M."    "Gérard"    "MARTIN\"," "\"Mme"     "Marie"     "DUPONT\","
[7] "\"M."      "Rémi"      "THOMAS\")"

[[2]]
 [1] "c(\"30"        "avenue"        "de"            "la"           
 [5] "République\"," "\"40"          "rue"           "de"           
 [9] "la"            "Libération\"," "\"2"           "impasse"      
[13] "des"           "pivoines\")"  

[[3]]
[1] "c(\"Toulouse\"," "\"Marseille\","  "\"Bordeaux\")"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(ExChaine<span class="sc">$</span>nom,<span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "M."     "Gérard" "MARTIN"

[[2]]
[1] "Mme"    "Marie"  "DUPONT"

[[3]]
[1] "M."     "Rémi"   "THOMAS"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(ExChaine<span class="sc">$</span>nom,<span class="st">"r"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "M. Gé"    "a"        "d MARTIN"

[[2]]
[1] "Mme Ma"    "ie DUPONT"

[[3]]
[1] "M. Rémi THOMAS"</code></pre>
</div>
</div>
<p>On peut également l’appliquer sur un tableau en ajoutant l’option <code>simplify = TRUE</code>.</p>
</div>
<div id="tabset-2-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-7-tab">
<p>La fonction <code>str_replace()</code> permet de remplacer une chaîne ou un motif par une autre.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(ExChaine<span class="sc">$</span>nom,<span class="st">"Mr"</span>,<span class="st">"M."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "M. Gérard MARTIN" "Mme Marie DUPONT" "M. Rémi THOMAS"  </code></pre>
</div>
</div>
<p>Pour spécifier plusieurs remplacements d’un coup, on peut utiliser <code>str_replace_all()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(ExChaine<span class="sc">$</span>adresse,<span class="fu">c</span>(<span class="st">"avenue"</span><span class="ot">=</span><span class="st">"Av."</span>,<span class="st">"rue"</span><span class="ot">=</span><span class="st">"Rue"</span>,<span class="st">"impasse"</span><span class="ot">=</span><span class="st">"Imp."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "30 Av. de la République" "40 Rue de la Libération"
[3] "2 Imp. des pivoines"    </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="visualisation-avec-ggplot2" class="level3" data-number="4.1.5">
<h3 data-number="4.1.5" class="anchored" data-anchor-id="visualisation-avec-ggplot2"><span class="header-section-number">4.1.5</span> Visualisation avec <code>ggplot2</code> <img src="image/ggplot2.png" class="class img-fluid" style="width:10.0%"></h3>
<p><a href="https://ggplot2.tidyverse.org/" target="_blank"><strong>ggplot2</strong></a> est une extension dédiée aux graphiques. Elle est basée sur une syntaxe particulière (il faut oublier les graphiques de base de R) mais robuste et efficace pour la construction de graphiques complexes. Elle demande donc un peu d’investissement pour se familiariser avec la syntaxe. Elle part du principe (comme tout package de tidyverse) que les données relatives au graphique sont stockées dans un tableau (data.frame ou tibble). Pour plus de détails, on peut consulter le livre <em>“Ggplot2: Elegant Graphics for Data Analysis”</em> de <span class="citation" data-cites="ggplot2">Wickham (<a href="references.html#ref-ggplot2" role="doc-biblioref">2016</a>)</span> et le <a href="https://ggplot2.tidyverse.org/" target="_blank">site web de ggplot2</a>.</p>
<p>Un graphique en <code>ggplot2</code> s’initialise avec la fonciton <code>ggplot()</code> qui prend en argument le jeu de données étudié. Par exemple, pour le jeu de données <em>Wine</em>,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>gEx <span class="ot">=</span> <span class="fu">ggplot</span>(<span class="at">data=</span>Wine)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pour l’instant, on ne voit rien mais pourtant l’objet <code>gEx</code> contient des informations :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(gEx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>data: Qualite, Type, AcidVol, AcidCitr, SO2lbr, SO2tot, Densite, Alcool
  [600x8]
faceting: &lt;ggproto object: Class FacetNull, Facet, gg&gt;
    compute_layout: function
    draw_back: function
    draw_front: function
    draw_labels: function
    draw_panels: function
    finish_data: function
    init_scales: function
    map_data: function
    params: list
    setup_data: function
    setup_params: function
    shrink: TRUE
    train_scales: function
    vars: function
    super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(gEx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "data"        "layers"      "scales"      "guides"      "mapping"    
 [6] "theme"       "coordinates" "facet"       "plot_env"    "layout"     
[11] "labels"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>gEx<span class="sc">$</span>layers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>list()</code></pre>
</div>
</div>
<p>mais pour l’instant son <code>layers</code> est vide.</p>
<p>On ajoute ensuite des éléments graphiques, appelés <code>geom</code>, à l’objet graphique grâce à l’opérateur <code>+</code> et on précise à l’aide de la fonction <code>aes()</code> les données à utiliser en argument du <code>geom</code>. Par exemple, si on veut faire l’histogramme de la variable <em>Alcool</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine)<span class="sc">+</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>Alcool))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>On peut également ajouter un <strong>mappage</strong>, c’est à dire une mise en relation entre un attribut graphique d’un geom et une variable du tableau de données. Par exemple, on peut mettre des couleurs à un nuage de points en fonction d’une variable qualitative, … Il faut bien distinguer un mappage d’une modification d’un attribut graphique sans lien avec une variable. Une règle importante à retenir est donc</p>
<ul>
<li>pour définir un mappage (relation entre les valeurs d’une variable et un attribut graphique), on le déclare dans <code>aes()</code></li>
<li>pour modifier un attribut graphique de la même manière pour tous les points, on le définit en-dehors de la fonction <code>aes()</code>.</li>
</ul>
<p>Dans la présentation qui suit des <code>geom</code> usuels, on proposera quelques illustrations de mappages. Chaque <code>geom</code> a sa liste de mappages possibles.</p>
<section id="les-geom-usuels" class="level4" data-number="4.1.5.1">
<h4 data-number="4.1.5.1" class="anchored" data-anchor-id="les-geom-usuels"><span class="header-section-number">4.1.5.1</span> Les <code>geom</code> usuels</h4>
<p>Nous allons ici présenter les <code>geom</code> les plus connus.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true"><code>geom_histogram()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false"><code>geom_point()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false"><code>geom_boxplot()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false"><code>geom_violin()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-5" role="tab" aria-controls="tabset-3-5" aria-selected="false"><code>geom_bar()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-6" role="tab" aria-controls="tabset-3-6" aria-selected="false"><code>geom_density()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-7" role="tab" aria-controls="tabset-3-7" aria-selected="false"><code>geom_line()</code></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p><code>geom_histogram()</code> permet de représenter l’histogramme d’une variable quantitative.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine)<span class="sc">+</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>Alcool))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine)<span class="sc">+</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>Alcool),<span class="at">binwidth=</span><span class="fl">0.2</span>,<span class="at">color=</span><span class="st">"red"</span>,<span class="at">fill=</span><span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine)<span class="sc">+</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>Alcool,<span class="at">fill=</span>Qualite),<span class="at">binwidth=</span><span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p><code>geom_point()</code> permet de représenter un nuage de points. Il faut préciser la position en x (la variable sur l’axe horizontal) et en y (la variable sur l’axe vertical) de ces points dans <code>aes()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine) <span class="sc">+</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Alcool,<span class="at">y=</span>Densite))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>On peut modifier certains attributs de ce graphique comme la couleur des points (<code>color</code>), la taille des points (<code>size</code>), leur transparence (<code>alpha</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine) <span class="sc">+</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Alcool,<span class="at">y=</span>Densite),<span class="at">color=</span><span class="st">"darkblue"</span>,<span class="at">size=</span><span class="dv">3</span>,<span class="at">alpha=</span><span class="fl">0.4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine) <span class="sc">+</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Alcool,<span class="at">y=</span>Densite,<span class="at">color=</span>Qualite,<span class="at">size=</span>AcidVol),<span class="at">alpha=</span><span class="fl">0.6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<p><code>geom_boxplot()</code> permet de représenter des boxplot (boites à moustaches). On lui précise en y la variable quantitative dont on veut étudier la répartition, et en x la variable qualitative contenant les groupes à comparer.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine)<span class="sc">+</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Qualite,<span class="at">y=</span>Alcool))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Vous pouvez vous référer à l’aide et la documentation en ligne pour ensuite améliorer ce graphique en modifiant certaines options.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine)<span class="sc">+</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Qualite,<span class="at">y=</span>Alcool))<span class="sc">+</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Wine) <span class="sc">+</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Qualite,<span class="at">y=</span>Alcool),<span class="at">outlier.colour=</span><span class="st">"darkgreen"</span>, <span class="at">outlier.shape=</span><span class="dv">25</span>,</span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">outlier.size=</span><span class="dv">3</span>, <span class="at">varwidth =</span> T,<span class="at">fill=</span><span class="st">"red"</span>,<span class="at">color=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<p><code>geom_violin()</code> est très proche de la représentation boxplot mais utilise la représentation en violon plutôt que la boite à moustaches, ce qui permet de mieux visualiser la distribution des données.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine)<span class="sc">+</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">x=</span>Qualite,<span class="at">y=</span>Alcool))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span>Wine) <span class="sc">+</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">x=</span>Qualite,<span class="at">y=</span>Alcool), <span class="at">fill=</span><span class="st">"red"</span>,<span class="at">color=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-5-tab">
<p><code>geom_bar()</code> permet la représentation en batôns (barplot) d’une variable qualitative (précisée en argument <code>x</code> à <code>aes()</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine) <span class="sc">+</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>Qualite))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>On peut modifier le visuel en changeant certaines options. Par exemple,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine) <span class="sc">+</span> </span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>Qualite),<span class="at">fill =</span> <span class="st">"darkblue"</span>, <span class="at">width =</span> .<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine) <span class="sc">+</span> </span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>Qualite,<span class="at">y =</span> ..prop..,<span class="at">group=</span><span class="dv">1</span>),<span class="at">fill =</span> <span class="st">"darkblue"</span>, <span class="at">width =</span> .<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>On peut aussi obtenir la représentation en camembert en modifiant un peu le graphique en baton en passant en “coordonnées polaires”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Wine, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">" "</span>, <span class="at">fill =</span> Qualite))<span class="sc">+</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>)<span class="sc">+</span> </span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-6-tab">
<p><code>geom_density()</code> permet de représenter l’estimation de la densité d’une variable quantitative. Son utilisation est similaire à <code>geom_histogram()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine) <span class="sc">+</span> </span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x=</span>Alcool))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-64-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine) <span class="sc">+</span> </span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x=</span>Alcool,<span class="at">fill=</span>Qualite),<span class="at">alpha=</span><span class="fl">0.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-7-tab">
<p><code>geom_line()</code> permet de tracer des lignes pour connecter des points entre eux. C’est en particulier utiliser pour représenter des séries temporelles.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"economics"</span>)</span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>economics) <span class="sc">+</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> unemploy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="pour-aller-plus-loin" class="level4" data-number="4.1.5.2">
<h4 data-number="4.1.5.2" class="anchored" data-anchor-id="pour-aller-plus-loin"><span class="header-section-number">4.1.5.2</span> Pour aller plus loin</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Représentations de plusieurs <code>geom</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Faceting</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false">Les <em>scales</em></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-4" role="tab" aria-controls="tabset-4-4" aria-selected="false">Thèmes</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-5" role="tab" aria-controls="tabset-4-5" aria-selected="false">Packages complémentaires et documentations</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p>On peut représenter plusieurs geom sur un même graphique simultanément, il suffit d’utiliser l’opérateur <code>+</code> pour les ajouter au fur et à mesure. On donne ici quelques exemples pour illustrer.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine)<span class="sc">+</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">x=</span>Qualite,<span class="at">y=</span>Alcool))<span class="sc">+</span></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Qualite,<span class="at">y=</span>Alcool), <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>,<span class="at">position=</span><span class="st">"jitter"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-67-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine,<span class="fu">aes</span>(<span class="at">x=</span>Alcool,<span class="at">y=</span>Densite))<span class="sc">+</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<p><em>faceting</em> est le terme pour faire un même graphique plusieurs fois selon les modalités d’une ou des variable(s) qualitative(s). On peut utiliser les fonctions <code>facet_wrap()</code> et <code>facet_grid()</code> qui prennent une <code>variable</code> qualitative sous la forme d’une formule <code>~variable</code>. Les différents graphiques sont affichés les uns à côtés des autres avec <code>facet_wrap()</code> et selon une grille avec <code>facet_grid()</code> (prend une formule <code>variable ligne ~ variable colonne</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine) <span class="sc">+</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Alcool,<span class="at">y=</span>Densite))<span class="sc">+</span></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Qualite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine) <span class="sc">+</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Alcool,<span class="at">y=</span>Densite))<span class="sc">+</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Qualite<span class="sc">~</span>.)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-70-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine) <span class="sc">+</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Alcool,<span class="at">y=</span>Densite))<span class="sc">+</span></span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Qualite<span class="sc">~</span>Type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-71-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<p>Les <em>scales</em> permettent de modifier la façon dont un attribut graphique est lié aux valeurs d’une variable. Pour les modifier, on ajoute un nouvel élément de la forme <code>scale_&lt;attribut&gt;_&lt;type&gt;</code> à l’objet graphique ggplot2 avec <code>+</code>. Les fonctions <em>scale</em> les plus connues sont :</p>
<ul>
<li><code>scale_size()</code> (avec son argument <code>range</code>) pour modifier les tailles minimales, maximales, …</li>
<li><code>scale_x()</code> et <code>scale_y()</code> pour modifier l’axe <code>x</code>et l’axe <code>y</code> respectivement</li>
<li><code>scale_x_continuous()</code> (resp. <code>scale_x_discrete()</code>) pour modifier l’axe des <code>x</code> dans le cas d’une variable quantitative (resp. une variable qualitative)</li>
<li><code>scale_y_continuous()</code> (resp. <code>scale_y_discrete()</code>) pour modifier l’axe des <code>y</code> dans le cas d’une variable quantitative (resp. une variable qualitative)</li>
<li><code>scale_color()</code> pour modifier les couleurs de dessin</li>
<li><code>scale_fill()</code> pour modifier les couleurs de remplissage</li>
</ul>
<p>Pour les couleurs, on peut spécifier un gradient de couleur sur une variable quantitative avec <code>scale_color_gradient()</code>, modifier manuellement la palette de couleur avec <code>scale_color_manual()</code>, faire appel à une palette de couleur prédéfinie (par exemple en utilisant le package <a href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html" target="_blank">viridis</a> avec <code>scale_color_viridis</code>, en s’appuyant sur les palettes disponibles dans <a href="https://colorbrewer2.org/#type=sequential&amp;scheme=BuGn&amp;n=3" target="_blank">ColorBrewer</a> avec <code>scale_color_brewer()</code>), … <!--
Pour aller plus loin sur le sujet des couleurs, vous pouvez consulter  ????????
--></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>Wine)<span class="sc">+</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Alcool,<span class="at">y=</span>Densite,<span class="at">size=</span>AcidVol))<span class="sc">+</span></span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="st">"Acide vol."</span>, <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">1.5</span>),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="fl">1.5</span>,<span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="st">"Alcool"</span>,<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">8</span>,<span class="dv">16</span>)) <span class="sc">+</span></span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="st">"Densité"</span>,<span class="at">limits=</span><span class="fu">c</span>(<span class="fl">0.985</span>,<span class="fl">1.01</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-72-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Wine) <span class="sc">+</span> </span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> Qualite)) <span class="sc">+</span></span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="st">"Qualité du vin"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-73-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-4-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-4-tab">
<p>Les thèmes permettent de gérer l’affichage des éléments graphiques non liés aux données comme les titres, les fonds, les grilles, … Il existe plusieurs thèmes prédéfinis comme <code>theme_classic()</code>, <code>theme_minimal()</code> et <code>theme_bw()</code>. On a aussi le package <code>ggthemes</code> qui fournit d’autres thèmes par exemple.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>g<span class="ot">=</span><span class="fu">ggplot</span>(<span class="at">data=</span>Wine)<span class="sc">+</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>Alcool,<span class="at">y=</span>Densite)) </span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>g1<span class="ot">=</span>g<span class="sc">+</span><span class="fu">theme_classic</span>()</span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a>g2<span class="ot">=</span>g<span class="sc">+</span><span class="fu">theme_minimal</span>()</span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a>g3<span class="ot">=</span>g<span class="sc">+</span><span class="fu">theme_bw</span>()</span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(g1,g2,g3,<span class="at">ncol=</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Part4-Ravance_files/figure-html/unnamed-chunk-74-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>On peut modifier chaque élément séparément avec une commande spécifique, par exemple :</p>
<ul>
<li><code>ggtitle()</code> pour modifier le titre</li>
<li><code>xlab()</code>et <code>ylab()</code> pour modifier l’intituler de l’axe des abscisses et des ordonnées respectivement</li>
</ul>
<p>Avec la fonction <code>theme()</code>, on peut contrôler les éléments graphiques incluant :</p>
<ul>
<li>les éléments linéaires (<code>element_line()</code>): traits des axes, traits des grilles mineur et majeur, bordure du panneau graphique, graduation des axes, couleurs de fond, …</li>
<li>les éléments textuels (<code>element_text()</code>): titre du graphique et des axes, titre et textes de la légende, les étiquettes des graduations des axes, …</li>
<li>les éléments rectangulaires (<code>element_rect()</code>) : arrière plan du graphique, du panneau et de la légende, … Les fonctions entre parenthèses sont spécifiques pour modifier chacun de ces trois éléments.</li>
</ul>
<p>En bref, les possibles avec ggplot2 sont infinis car de nombreux éléments sont personnalisables. Un moyen pour maitriser toutes ces possibilités est l’utilisation de l’addin RStudio <code>ggThemeAssist</code>. Pour cela, il faut installer le package <code>ggThemeAssist</code>, de sélectionner le code correspondant à un graphique ggplot2 et d’aller dans le menu Addins pour choisir <em>ggplot Theme Assistant</em>. Une interface graphique s’ouvre alors, permettant de modifier différents éléments du graphique et d’en récupérer le code correspondant.</p>
</div>
<div id="tabset-4-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-5-tab">
<p>On donne ici une liste non exhaustive de packages que l’on peut utiliser en complément de <strong>ggplot2</strong> :</p>
<ul>
<li>Le package <a href="https://github.com/ropensci/plotly" target="_blank">plotly</a> permet d’avoir des graphiques interactifs. On peut par exemple utiliser la fonction <code>ggplotly()</code> sur un graphique ggplot2</li>
<li>Le package <a href="https://cran.r-project.org/web/packages/gridExtra/index.html" target="_blank">gridExtra</a> permet d’organiser plusieurs graphiques sur une même fenêtre graphique. On peut par exemple utiliser la fonction <code>grid.arrange()</code>.<br>
</li>
<li>Le package <a href="https://github.com/wilkelab/cowplot" target="_blank">cowplot</a> contient des fonctionnalités qui permettent d’avoir des graphiques de qualité pour des publications, en particulier pour l’organisation de plusieurs graphiques.</li>
<li>Le package <a href="https://github.com/dreamRs/esquisse" target="_blank">esquisse</a> est un package qui fournit une interface graphique pour la construction de graphiques avec ggplot2.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>g<span class="ot">=</span><span class="fu">ggplot</span>(Wine,<span class="fu">aes</span>(<span class="at">x=</span>Alcool,<span class="at">y=</span>Densite))<span class="sc">+</span></span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-ed7ed744071cd9bca509" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-ed7ed744071cd9bca509">{"x":{"data":[{"x":[11.800000000000001,9.1999999999999993,9,9,10.6,9.4000000000000004,10.199999999999999,10,10.800000000000001,9.4000000000000004,9.9000000000000004,12.699999999999999,10.199999999999999,9.0999999999999996,10.4,9.1999999999999993,12.300000000000001,10.4,10.1,9.6999999999999993,9.1999999999999993,11.300000000000001,11.300000000000001,9.4000000000000004,11,9,11.5,11.5,12.800000000000001,9.9000000000000004,13,10.800000000000001,9.5999999999999996,9.9000000000000004,9.4000000000000004,12.199999999999999,10.5,10,8.6999999999999993,11.300000000000001,10.5,9.5,9,9.9000000000000004,9.6999999999999993,10.9,10.1,12,9.5999999999999996,9.5,11.5,11.4,10.1,9.9000000000000004,10.199999999999999,10.1,9,11.199999999999999,10.199999999999999,10.4,11,10,12.800000000000001,10.800000000000001,10.800000000000001,13.300000000000001,9.4000000000000004,9.4000000000000004,9,11.300000000000001,12.699999999999999,11.300000000000001,9,9.0999999999999996,9,10,11.4,9,9.5,9.5,12.6,9.1999999999999993,9,10.5,9.0999999999999996,10.800000000000001,9.8000000000000007,9.9000000000000004,11.4,10.1,10.699999999999999,13,9.5,10.4,10.5,11.699999999999999,11.699999999999999,10.6,11.1,10.5,9.8000000000000007,11.699999999999999,9.9000000000000004,9,10.6,11.5,9.0999999999999996,12.9,10.699999999999999,10.699999999999999,11.199999999999999,11,10.199999999999999,9.4000000000000004,9.8000000000000007,9.0999999999999996,9.5,10,11.1,8,11.199999999999999,8.6999999999999993,10.699999999999999,12.699999999999999,10.699999999999999,9.1999999999999993,11.800000000000001,10.1,11.300000000000001,10.800000000000001,12.1,10.4,9.9000000000000004,10.4,10.9,9.8000000000000007,11.4,11,10.300000000000001,10.4,13,10.1,12,10,11,8.9000000000000004,9,10.5,9.8000000000000007,9.0999999999999996,9.5,12.5,9.5,9.6999999999999993,12.1,11.300000000000001,9.5,9.1999999999999993,9,12.893333330000001,9.5999999999999996,11.5,10.800000000000001,9.0999999999999996,12.199999999999999,11.5,8.8000000000000007,11.1,9.9000000000000004,10.4,11.4,10.5,11.800000000000001,13.4,9.8000000000000007,11.4,12.33333333,12.699999999999999,13.199999999999999,9.6999999999999993,11,12.4,12,11.199999999999999,9.1999999999999993,9.8000000000000007,10.9,9,10.5,11.199999999999999,9.8000000000000007,10.6,9.9000000000000004,9.5,9.0999999999999996,10.4,11.199999999999999,9.5,10.5,9.5,9,12.5,11.4,9.4000000000000004,10.300000000000001,10.699999999999999,9.8000000000000007,9.1999999999999993,12.300000000000001,11.4,9.3000000000000007,10.1,10.9,10.5,10.6,10.5,10.6,12,9,10.4,8.8000000000000007,11,10.800000000000001,9.4000000000000004,11.5,9.6999999999999993,9.5,10.6,9.5,9.1999999999999993,9.4000000000000004,9,8.8000000000000007,10.699999999999999,9.4000000000000004,9.4000000000000004,10,14,8.9000000000000004,11.300000000000001,11.300000000000001,11.9,9.6999999999999993,11.5,9.1999999999999993,9.8000000000000007,11.5,10.5,10.9,9.5,12.893333330000001,9.1999999999999993,12.1,9.1999999999999993,9.9000000000000004,9.6999999999999993,11.199999999999999,9.5,12,9.6999999999999993,10.6,13,10,9.4000000000000004,10.699999999999999,11.300000000000001,10.9,9.4000000000000004,9.0999999999999996,9.8000000000000007,10.699999999999999,11,12.6,9.4000000000000004,12.699999999999999,13,9.5999999999999996,11.4,9.8000000000000007,9.5,11.6,9,9.9000000000000004,11.699999999999999,11.699999999999999,10.9,10.5,11.5,11.699999999999999,9.4000000000000004,9.8000000000000007,9,9.9000000000000004,12.5,11,9.4000000000000004,13.1,9.3000000000000007,11.300000000000001,9.5,10.4,12,12.9,9.4000000000000004,12.9,9.9000000000000004,12.4,9.4000000000000004,9.8000000000000007,9,10,10.800000000000001,9.1999999999999993,10.199999999999999,10.5,9.9000000000000004,10.199999999999999,11.5,10,10.199999999999999,9.3000000000000007,10.9,12,9.4000000000000004,9.3000000000000007,9.9000000000000004,9.1999999999999993,12.5,9.5,12,10.4,9.9000000000000004,9.6999999999999993,9.4000000000000004,9.5,9.5999999999999996,9.9000000000000004,9.0999999999999996,10.699999999999999,12.6,10.5,9.9000000000000004,11.800000000000001,11.5,11.6,11.300000000000001,11.949999999999999,9.4000000000000004,11.4,12,10.4,12,13.1,10.4,10.5,9.1999999999999993,10.9,8.9000000000000004,9.4000000000000004,10,11.6,12,10.9,9.5999999999999996,11.699999999999999,12.4,12,11.5,9.3000000000000007,9.9000000000000004,10.6,8.6999999999999993,10.800000000000001,11.4,11,11.9,9,10,11.4,11.4,11.4,9.9000000000000004,11.4,9.4000000000000004,11.449999999999999,9.0999999999999996,9.1999999999999993,10.800000000000001,9.8000000000000007,12.199999999999999,12.4,9,9.4000000000000004,9.5,9.1999999999999993,9.1999999999999993,10.800000000000001,10.199999999999999,11.699999999999999,10.6,9.3000000000000007,10.199999999999999,11.5,9.0999999999999996,9.1999999999999993,8.6999999999999993,12.300000000000001,11.300000000000001,9.0999999999999996,11,12.300000000000001,10.5,10.1,9.3000000000000007,11.1,9.9000000000000004,9.4000000000000004,10.199999999999999,10.9,9.8000000000000007,9.6999999999999993,11.1,9.0999999999999996,8.9000000000000004,9.1999999999999993,9.4000000000000004,9.4000000000000004,9.4000000000000004,9.1999999999999993,10.6,9.8000000000000007,10.199999999999999,10,11.6,11.699999999999999,10.4,11.300000000000001,9.4000000000000004,11.800000000000001,10.199999999999999,11.199999999999999,10.4,9.4000000000000004,10.6,9.8000000000000007,11.6,10.800000000000001,9.0999999999999996,9.5999999999999996,11.300000000000001,11.300000000000001,9.5999999999999996,11.1,8.6999999999999993,10.6,13.4,12.800000000000001,11.300000000000001,9.9000000000000004,9.5,12.5,11.199999999999999,8.9000000000000004,9.5,11.5,10.199999999999999,10.5,11.1,9.5,9.5999999999999996,11.300000000000001,10.1,10.5,11.1,10.199999999999999,11,11,12.199999999999999,10.5,9.9000000000000004,8.8000000000000007,9.8000000000000007,9.1999999999999993,10.5,8.9000000000000004,10.1,11.9,10,10.6,9.1999999999999993,10.53333333,11.5,9.8000000000000007,11.300000000000001,9.9000000000000004,9.4000000000000004,12.300000000000001,11.5,10.1,9.5,9,10.1,12.5,10.6,11.4,9.3000000000000007,9.9000000000000004,9.0999999999999996,9.5,9.1999999999999993,13.550000000000001,12.5,10.4,11,12.1,12.300000000000001,11.4,11.6,13,9.4000000000000004,13.4,9,8.6999999999999993,8.6999999999999993,9.4000000000000004,11.199999999999999,9.8000000000000007,9.6999999999999993,9.3000000000000007,9.5,9.0999999999999996,10.4,10.9,9.9000000000000004,11,10,9.1999999999999993,12.1,9.6999999999999993,9.9000000000000004,10.5,10.1,10.9,11.199999999999999,11.300000000000001,10.1,9.4000000000000004,10,10.300000000000001,9.5,12.6,8.8000000000000007,12,10.199999999999999,11.199999999999999,12,9.5,9.5999999999999996,11.4,11.699999999999999,9.8000000000000007,10.199999999999999,11,10.300000000000001,9,11,12.5,12.300000000000001,12.5,9.6999999999999993,11.1,12,10,10.4,9.3000000000000007,10.4,12.050000000000001,11.9,9.5,11,10.199999999999999,11.699999999999999,10.699999999999999,10.199999999999999,9,12,11.699999999999999,9.4000000000000004,12.699999999999999,8.9000000000000004,10,11.5,9.4000000000000004,9.6999999999999993,11.800000000000001,9.5,9.1999999999999993,9.8000000000000007,9.0999999999999996,10.699999999999999],"y":[0.99331999999999998,0.99370000000000003,0.99855000000000005,0.99785999999999997,0.99478999999999995,0.99839999999999995,0.99392999999999998,0.99199999999999999,0.99361999999999995,0.99551999999999996,0.99351999999999996,0.99036000000000002,0.99514000000000002,0.99980000000000002,0.99453999999999998,0.9929,0.99099999999999999,0.99751999999999996,0.99580000000000002,0.99212,0.99770000000000003,0.99160000000000004,0.99150000000000005,0.99660000000000004,0.99634,0.99750000000000005,0.99439999999999995,0.99273999999999996,0.98868999999999996,0.99790000000000001,0.99285999999999996,0.99399999999999999,0.99719999999999998,0.99285999999999996,0.99560000000000004,0.99109999999999998,0.99229999999999996,0.99646999999999997,0.99819999999999998,0.99146000000000001,0.99428000000000005,0.997,0.99685000000000001,0.99378,0.99829999999999997,0.99370000000000003,0.99555000000000005,0.99214000000000002,0.99650000000000005,0.99519999999999997,0.99089000000000005,0.99309999999999998,0.99570000000000003,0.99829999999999997,0.99670000000000003,0.99590000000000001,0.99570000000000003,0.99265999999999999,0.99136999999999997,0.99419999999999997,0.99521000000000004,0.99360000000000004,0.99378,0.99517999999999995,0.99143000000000003,0.99519999999999997,0.99856,0.99760000000000004,0.99792000000000003,0.99146000000000001,0.98982000000000003,0.99572000000000005,0.99560000000000004,0.99790000000000001,0.99719999999999998,0.99585999999999997,0.99619999999999997,0.998,0.99544999999999995,0.99716000000000005,0.98865000000000003,0.99709999999999999,0.99580000000000002,0.99380000000000002,0.99580000000000002,0.997,0.99438000000000004,0.99680000000000002,0.99046999999999996,0.99934999999999996,0.99550000000000005,0.98946000000000001,0.99787999999999999,0.99648000000000003,0.99256,0.99860000000000004,0.99339999999999995,0.99492000000000003,0.99519999999999997,0.99511000000000005,1.0001500000000001,0.99397000000000002,0.99260000000000004,0.99775999999999998,0.99246000000000001,0.99112,0.99839999999999995,0.98943999999999999,0.995,0.99509999999999998,0.99343999999999999,0.99760000000000004,0.99309999999999998,0.997,0.99658999999999998,0.99709999999999999,0.99551000000000001,0.99219999999999997,0.99339999999999995,0.99331999999999998,0.99173999999999995,0.99860000000000004,0.99519999999999997,0.98960999999999999,0.99141999999999997,0.99324000000000001,0.99370999999999998,0.99655000000000005,0.99107000000000001,0.99390000000000001,0.99206000000000005,0.99705999999999995,0.99539999999999995,0.99180000000000001,0.99509999999999998,0.99699000000000004,0.99472000000000005,0.99268000000000001,0.99241999999999997,0.99299999999999999,0.99250000000000005,0.99909999999999999,0.99280000000000002,0.99539999999999995,0.99719999999999998,0.99780000000000002,0.99755000000000005,0.99256,0.99819999999999998,0.99785999999999997,0.99717999999999996,0.99651999999999996,0.99587000000000003,0.99743999999999999,0.98894000000000004,0.99594000000000005,0.99434,0.99587000000000003,0.99773000000000001,0.99009999999999998,0.99307999999999996,0.99089000000000005,0.99380000000000002,0.99529999999999996,0.99031000000000002,0.99134,0.99639999999999995,0.99216000000000004,0.99819999999999998,0.997,0.99019999999999997,0.99677000000000004,0.99319999999999997,0.98980999999999997,0.99626000000000003,0.99860000000000004,0.98999999999999999,0.99317999999999995,0.98882000000000003,0.99897999999999998,0.99112,0.98929999999999996,0.99114000000000002,0.99019999999999997,0.99560000000000004,0.99458000000000002,0.99050000000000005,0.99760000000000004,0.99170000000000003,0.99175000000000002,0.99639999999999995,0.99505999999999994,0.99209999999999998,0.99709999999999999,0.99572000000000005,0.99460000000000004,0.99194000000000004,0.99680000000000002,0.99614999999999998,0.99568999999999996,0.99780000000000002,0.99070000000000003,0.99773999999999996,0.99319999999999997,0.99490000000000001,0.99470000000000003,0.99556,0.99539999999999995,0.98960000000000004,0.99068999999999996,0.99814999999999998,0.99392000000000003,0.99619999999999997,0.99309999999999998,0.99519999999999997,0.99092000000000002,0.99380000000000002,0.99383999999999995,0.99807999999999997,0.99524000000000001,1.0024200000000001,0.99180000000000001,0.99214999999999998,0.99604000000000004,0.99189000000000005,0.99636000000000002,0.99690000000000001,0.99280000000000002,0.99419999999999997,1,0.99360000000000004,0.99826999999999999,0.99602000000000002,0.99309999999999998,0.99660000000000004,0.99785000000000001,0.99517,0.98746,0.99960000000000004,0.99036000000000002,0.99350000000000005,0.99151999999999996,0.99661,0.99495,0.99814999999999998,0.99729000000000001,0.99370000000000003,0.99329999999999996,0.99739999999999995,0.99560000000000004,0.99009999999999998,1,0.99226000000000003,0.99595999999999996,0.99939999999999996,0.99636000000000002,0.99429999999999996,0.99687999999999999,0.99216000000000004,0.99778999999999995,0.99619999999999997,0.99239999999999995,0.99734999999999996,0.99475000000000002,0.99650000000000005,0.99189000000000005,0.99073999999999995,0.99680000000000002,0.99860000000000004,0.99750000000000005,0.99380000000000002,0.99373999999999996,0.9899,0.99370000000000003,0.98951999999999996,1.0018,0.99695999999999996,0.99299999999999999,0.99616000000000005,0.99416000000000004,0.99299999999999999,0.99860000000000004,0.99604999999999999,0.99460000000000004,0.99038000000000004,0.99126000000000003,0.99614999999999998,0.99187999999999998,0.99099999999999999,0.99399999999999999,0.99163999999999997,0.99397999999999997,0.99402999999999997,0.99123000000000006,0.99404000000000003,0.99839999999999995,0.99153999999999998,0.99819999999999998,0.997,0.99690000000000001,0.99199999999999999,0.99638000000000004,0.99319999999999997,0.99502000000000002,0.98899999999999999,0.99424999999999997,0.99272000000000005,0.99319999999999997,0.99626999999999999,0.99494000000000005,0.99680000000000002,0.99402000000000001,0.99719999999999998,0.99309999999999998,0.99860000000000004,0.99560000000000004,0.99590000000000001,0.99339999999999995,0.99790000000000001,0.99639999999999995,1.0014000000000001,0.99139999999999995,0.99619999999999997,0.99819999999999998,0.99570000000000003,0.99497999999999998,0.99860000000000004,0.99041999999999997,0.999,0.99260000000000004,0.99151999999999996,0.99575999999999998,0.99975000000000003,0.99929999999999997,0.99350000000000005,0.99536999999999998,0.99624999999999997,0.99860000000000004,0.99360000000000004,0.99014000000000002,0.99319999999999997,0.99324000000000001,0.99160999999999999,0.98963999999999996,0.99378,0.99058000000000002,0.99348000000000003,0.99560000000000004,0.99053000000000002,0.99019000000000001,0.99202000000000001,0.99184000000000005,0.98921999999999999,0.99960000000000004,0.9929,0.99909999999999999,0.99175999999999997,0.99975999999999998,0.99819999999999998,0.99434,0.99109999999999998,0.99060000000000004,0.99638000000000004,0.99553000000000003,0.99119999999999997,0.98999999999999999,0.9909,0.99084000000000005,0.99980000000000002,0.99199999999999999,0.98985000000000001,0.99839999999999995,0.99219999999999997,0.99299999999999999,0.99639999999999995,0.99199999999999999,0.99490000000000001,0.99424999999999997,0.99175999999999997,0.99360000000000004,0.99043000000000003,0.99339999999999995,0.99182000000000003,0.99512,0.99019999999999997,0.99839999999999995,0.99782000000000004,0.99590000000000001,0.99580000000000002,0.99119000000000002,0.99099999999999999,0.99675000000000002,1.0005999999999999,0.99783999999999995,0.99319999999999997,0.99577000000000004,0.99039999999999995,0.99575000000000002,0.9909,0.99521999999999999,0.99412999999999996,0.99270999999999998,0.99112,0.99829999999999997,0.99528000000000005,1.00044,0.98939999999999995,0.99031999999999998,0.99880000000000002,0.99390000000000001,0.99021000000000003,0.99380000000000002,0.99909999999999999,0.99428000000000005,0.99490000000000001,0.99339999999999995,0.99609999999999999,0.99319999999999997,0.99280000000000002,0.99629999999999996,0.99380000000000002,0.99375999999999998,0.99834000000000001,0.99590000000000001,0.99304000000000003,0.99656,0.99370000000000003,0.99839999999999995,0.99829999999999997,0.99270000000000003,0.99399999999999999,0.999,0.99239999999999995,0.98960999999999999,0.99516000000000004,0.99353999999999998,0.99058000000000002,0.99780000000000002,0.995,1.0005999999999999,0.99429999999999996,0.99309999999999998,0.99739999999999995,0.99470999999999998,0.99428000000000005,0.99126000000000003,0.99299000000000004,0.99360000000000004,0.99790000000000001,0.99539999999999995,0.99360000000000004,0.99480000000000002,0.99243999999999999,0.99750000000000005,1.00295,0.98960000000000004,0.99378,0.99470000000000003,0.99370000000000003,0.99939999999999996,0.99139999999999995,0.99643999999999999,0.99685000000000001,0.99782000000000004,0.99572000000000005,0.99741999999999997,0.99299999999999999,0.99629999999999996,0.99590000000000001,1.0002,0.99014000000000002,0.99809999999999999,0.99456,0.99268000000000001,0.99850000000000005,0.99639999999999995,0.99880000000000002,0.99077000000000004,0.99490000000000001,0.99609999999999999,0.99941000000000002,0.99438000000000004,0.99970000000000003,0.99658999999999998,0.99861999999999995,0.99250000000000005,0.99087999999999998,0.99814000000000003,0.99827999999999995,1.0009999999999999,0.99312999999999996,0.99280000000000002,0.99439999999999995,0.99039999999999995,0.99783999999999995,0.99692000000000003,0.99219999999999997,0.99890000000000001,0.99260000000000004,0.99543999999999999,0.99624999999999997,0.99658000000000002,0.98999999999999999,0.99319999999999997,0.99270000000000003,0.99519999999999997,0.99621999999999999,0.99860000000000004,0.99270000000000003,1.00051,0.98758000000000001,0.99151,0.99229999999999996,0.99731999999999998,0.99285999999999996,0.98992999999999998,0.99346000000000001,0.99709999999999999,0.98853999999999997,0.99980000000000002,0.98862000000000005,0.99790000000000001,0.99739999999999995,0.99750000000000005,0.99692999999999998,0.99082000000000003,0.99458000000000002,0.99748000000000003,0.99690000000000001,0.99726999999999999,0.99883999999999995,0.99450000000000005,0.99619000000000002,0.99287000000000003,0.99336000000000002,0.99519999999999997,0.99719999999999998,0.99109999999999998,0.99743000000000004,0.99339999999999995,0.99619999999999997,0.99204000000000003,0.99858999999999998,0.99960000000000004,0.99280000000000002,0.99780000000000002,0.99339999999999995,0.99550000000000005,0.99690000000000001,0.99790000000000001,0.98862000000000005,0.998,0.98972000000000004,0.99270999999999998,0.99075999999999997,0.99075999999999997,0.997,0.99760000000000004,0.99048000000000003,0.99270000000000003,0.99712000000000001,0.99612000000000001,0.99111000000000005,0.99270000000000003,0.99839999999999995,0.99060000000000004,0.99139999999999995,0.99316000000000004,0.99080000000000001,0.99709999999999999,0.99236999999999997,0.99729999999999996,0.99592999999999998,0.99970000000000003,0.99839999999999995,0.99256,0.98970000000000002,0.99641999999999997,0.99519999999999997,0.99114000000000002,0.99460000000000004,0.99460000000000004,0.99177999999999999,0.99668999999999996,1.0007999999999999,0.99517999999999995,0.99314000000000002,0.99753999999999998,0.98980000000000001,0.99609999999999999,0.99217999999999995,0.99109999999999998,0.99529999999999996,0.99297000000000002,0.99456,0.99938000000000005,0.99880000000000002,0.99616000000000005,0.99550000000000005,0.99604999999999999],"text":["Alcool: 11.80000<br />Densite: 0.99332","Alcool:  9.20000<br />Densite: 0.99370","Alcool:  9.00000<br />Densite: 0.99855","Alcool:  9.00000<br />Densite: 0.99786","Alcool: 10.60000<br />Densite: 0.99479","Alcool:  9.40000<br />Densite: 0.99840","Alcool: 10.20000<br />Densite: 0.99393","Alcool: 10.00000<br />Densite: 0.99200","Alcool: 10.80000<br />Densite: 0.99362","Alcool:  9.40000<br />Densite: 0.99552","Alcool:  9.90000<br />Densite: 0.99352","Alcool: 12.70000<br />Densite: 0.99036","Alcool: 10.20000<br />Densite: 0.99514","Alcool:  9.10000<br />Densite: 0.99980","Alcool: 10.40000<br />Densite: 0.99454","Alcool:  9.20000<br />Densite: 0.99290","Alcool: 12.30000<br />Densite: 0.99100","Alcool: 10.40000<br />Densite: 0.99752","Alcool: 10.10000<br />Densite: 0.99580","Alcool:  9.70000<br />Densite: 0.99212","Alcool:  9.20000<br />Densite: 0.99770","Alcool: 11.30000<br />Densite: 0.99160","Alcool: 11.30000<br />Densite: 0.99150","Alcool:  9.40000<br />Densite: 0.99660","Alcool: 11.00000<br />Densite: 0.99634","Alcool:  9.00000<br />Densite: 0.99750","Alcool: 11.50000<br />Densite: 0.99440","Alcool: 11.50000<br />Densite: 0.99274","Alcool: 12.80000<br />Densite: 0.98869","Alcool:  9.90000<br />Densite: 0.99790","Alcool: 13.00000<br />Densite: 0.99286","Alcool: 10.80000<br />Densite: 0.99400","Alcool:  9.60000<br />Densite: 0.99720","Alcool:  9.90000<br />Densite: 0.99286","Alcool:  9.40000<br />Densite: 0.99560","Alcool: 12.20000<br />Densite: 0.99110","Alcool: 10.50000<br />Densite: 0.99230","Alcool: 10.00000<br />Densite: 0.99647","Alcool:  8.70000<br />Densite: 0.99820","Alcool: 11.30000<br />Densite: 0.99146","Alcool: 10.50000<br />Densite: 0.99428","Alcool:  9.50000<br />Densite: 0.99700","Alcool:  9.00000<br />Densite: 0.99685","Alcool:  9.90000<br />Densite: 0.99378","Alcool:  9.70000<br />Densite: 0.99830","Alcool: 10.90000<br />Densite: 0.99370","Alcool: 10.10000<br />Densite: 0.99555","Alcool: 12.00000<br />Densite: 0.99214","Alcool:  9.60000<br />Densite: 0.99650","Alcool:  9.50000<br />Densite: 0.99520","Alcool: 11.50000<br />Densite: 0.99089","Alcool: 11.40000<br />Densite: 0.99310","Alcool: 10.10000<br />Densite: 0.99570","Alcool:  9.90000<br />Densite: 0.99830","Alcool: 10.20000<br />Densite: 0.99670","Alcool: 10.10000<br />Densite: 0.99590","Alcool:  9.00000<br />Densite: 0.99570","Alcool: 11.20000<br />Densite: 0.99266","Alcool: 10.20000<br />Densite: 0.99137","Alcool: 10.40000<br />Densite: 0.99420","Alcool: 11.00000<br />Densite: 0.99521","Alcool: 10.00000<br />Densite: 0.99360","Alcool: 12.80000<br />Densite: 0.99378","Alcool: 10.80000<br />Densite: 0.99518","Alcool: 10.80000<br />Densite: 0.99143","Alcool: 13.30000<br />Densite: 0.99520","Alcool:  9.40000<br />Densite: 0.99856","Alcool:  9.40000<br />Densite: 0.99760","Alcool:  9.00000<br />Densite: 0.99792","Alcool: 11.30000<br />Densite: 0.99146","Alcool: 12.70000<br />Densite: 0.98982","Alcool: 11.30000<br />Densite: 0.99572","Alcool:  9.00000<br />Densite: 0.99560","Alcool:  9.10000<br />Densite: 0.99790","Alcool:  9.00000<br />Densite: 0.99720","Alcool: 10.00000<br />Densite: 0.99586","Alcool: 11.40000<br />Densite: 0.99620","Alcool:  9.00000<br />Densite: 0.99800","Alcool:  9.50000<br />Densite: 0.99545","Alcool:  9.50000<br />Densite: 0.99716","Alcool: 12.60000<br />Densite: 0.98865","Alcool:  9.20000<br />Densite: 0.99710","Alcool:  9.00000<br />Densite: 0.99580","Alcool: 10.50000<br />Densite: 0.99380","Alcool:  9.10000<br />Densite: 0.99580","Alcool: 10.80000<br />Densite: 0.99700","Alcool:  9.80000<br />Densite: 0.99438","Alcool:  9.90000<br />Densite: 0.99680","Alcool: 11.40000<br />Densite: 0.99047","Alcool: 10.10000<br />Densite: 0.99935","Alcool: 10.70000<br />Densite: 0.99550","Alcool: 13.00000<br />Densite: 0.98946","Alcool:  9.50000<br />Densite: 0.99788","Alcool: 10.40000<br />Densite: 0.99648","Alcool: 10.50000<br />Densite: 0.99256","Alcool: 11.70000<br />Densite: 0.99860","Alcool: 11.70000<br />Densite: 0.99340","Alcool: 10.60000<br />Densite: 0.99492","Alcool: 11.10000<br />Densite: 0.99520","Alcool: 10.50000<br />Densite: 0.99511","Alcool:  9.80000<br />Densite: 1.00015","Alcool: 11.70000<br />Densite: 0.99397","Alcool:  9.90000<br />Densite: 0.99260","Alcool:  9.00000<br />Densite: 0.99776","Alcool: 10.60000<br />Densite: 0.99246","Alcool: 11.50000<br />Densite: 0.99112","Alcool:  9.10000<br />Densite: 0.99840","Alcool: 12.90000<br />Densite: 0.98944","Alcool: 10.70000<br />Densite: 0.99500","Alcool: 10.70000<br />Densite: 0.99510","Alcool: 11.20000<br />Densite: 0.99344","Alcool: 11.00000<br />Densite: 0.99760","Alcool: 10.20000<br />Densite: 0.99310","Alcool:  9.40000<br />Densite: 0.99700","Alcool:  9.80000<br />Densite: 0.99659","Alcool:  9.10000<br />Densite: 0.99710","Alcool:  9.50000<br />Densite: 0.99551","Alcool: 10.00000<br />Densite: 0.99220","Alcool: 11.10000<br />Densite: 0.99340","Alcool:  8.00000<br />Densite: 0.99332","Alcool: 11.20000<br />Densite: 0.99174","Alcool:  8.70000<br />Densite: 0.99860","Alcool: 10.70000<br />Densite: 0.99520","Alcool: 12.70000<br />Densite: 0.98961","Alcool: 10.70000<br />Densite: 0.99142","Alcool:  9.20000<br />Densite: 0.99324","Alcool: 11.80000<br />Densite: 0.99371","Alcool: 10.10000<br />Densite: 0.99655","Alcool: 11.30000<br />Densite: 0.99107","Alcool: 10.80000<br />Densite: 0.99390","Alcool: 12.10000<br />Densite: 0.99206","Alcool: 10.40000<br />Densite: 0.99706","Alcool:  9.90000<br />Densite: 0.99540","Alcool: 10.40000<br />Densite: 0.99180","Alcool: 10.90000<br />Densite: 0.99510","Alcool:  9.80000<br />Densite: 0.99699","Alcool: 11.40000<br />Densite: 0.99472","Alcool: 11.00000<br />Densite: 0.99268","Alcool: 10.30000<br />Densite: 0.99242","Alcool: 10.40000<br />Densite: 0.99300","Alcool: 13.00000<br />Densite: 0.99250","Alcool: 10.10000<br />Densite: 0.99910","Alcool: 12.00000<br />Densite: 0.99280","Alcool: 10.00000<br />Densite: 0.99540","Alcool: 11.00000<br />Densite: 0.99720","Alcool:  8.90000<br />Densite: 0.99780","Alcool:  9.00000<br />Densite: 0.99755","Alcool: 10.50000<br />Densite: 0.99256","Alcool:  9.80000<br />Densite: 0.99820","Alcool:  9.10000<br />Densite: 0.99786","Alcool:  9.50000<br />Densite: 0.99718","Alcool: 12.50000<br />Densite: 0.99652","Alcool:  9.50000<br />Densite: 0.99587","Alcool:  9.70000<br />Densite: 0.99744","Alcool: 12.10000<br />Densite: 0.98894","Alcool: 11.30000<br />Densite: 0.99594","Alcool:  9.50000<br />Densite: 0.99434","Alcool:  9.20000<br />Densite: 0.99587","Alcool:  9.00000<br />Densite: 0.99773","Alcool: 12.89333<br />Densite: 0.99010","Alcool:  9.60000<br />Densite: 0.99308","Alcool: 11.50000<br />Densite: 0.99089","Alcool: 10.80000<br />Densite: 0.99380","Alcool:  9.10000<br />Densite: 0.99530","Alcool: 12.20000<br />Densite: 0.99031","Alcool: 11.50000<br />Densite: 0.99134","Alcool:  8.80000<br />Densite: 0.99640","Alcool: 11.10000<br />Densite: 0.99216","Alcool:  9.90000<br />Densite: 0.99820","Alcool: 10.40000<br />Densite: 0.99700","Alcool: 11.40000<br />Densite: 0.99020","Alcool: 10.50000<br />Densite: 0.99677","Alcool: 11.80000<br />Densite: 0.99320","Alcool: 13.40000<br />Densite: 0.98981","Alcool:  9.80000<br />Densite: 0.99626","Alcool: 11.40000<br />Densite: 0.99860","Alcool: 12.33333<br />Densite: 0.99000","Alcool: 12.70000<br />Densite: 0.99318","Alcool: 13.20000<br />Densite: 0.98882","Alcool:  9.70000<br />Densite: 0.99898","Alcool: 11.00000<br />Densite: 0.99112","Alcool: 12.40000<br />Densite: 0.98930","Alcool: 12.00000<br />Densite: 0.99114","Alcool: 11.20000<br />Densite: 0.99020","Alcool:  9.20000<br />Densite: 0.99560","Alcool:  9.80000<br />Densite: 0.99458","Alcool: 10.90000<br />Densite: 0.99050","Alcool:  9.00000<br />Densite: 0.99760","Alcool: 10.50000<br />Densite: 0.99170","Alcool: 11.20000<br />Densite: 0.99175","Alcool:  9.80000<br />Densite: 0.99640","Alcool: 10.60000<br />Densite: 0.99506","Alcool:  9.90000<br />Densite: 0.99210","Alcool:  9.50000<br />Densite: 0.99710","Alcool:  9.10000<br />Densite: 0.99572","Alcool: 10.40000<br />Densite: 0.99460","Alcool: 11.20000<br />Densite: 0.99194","Alcool:  9.50000<br />Densite: 0.99680","Alcool: 10.50000<br />Densite: 0.99615","Alcool:  9.50000<br />Densite: 0.99569","Alcool:  9.00000<br />Densite: 0.99780","Alcool: 12.50000<br />Densite: 0.99070","Alcool: 11.40000<br />Densite: 0.99774","Alcool:  9.40000<br />Densite: 0.99320","Alcool: 10.30000<br />Densite: 0.99490","Alcool: 10.70000<br />Densite: 0.99470","Alcool:  9.80000<br />Densite: 0.99556","Alcool:  9.20000<br />Densite: 0.99540","Alcool: 12.30000<br />Densite: 0.98960","Alcool: 11.40000<br />Densite: 0.99069","Alcool:  9.30000<br />Densite: 0.99815","Alcool: 10.10000<br />Densite: 0.99392","Alcool: 10.90000<br />Densite: 0.99620","Alcool: 10.50000<br />Densite: 0.99310","Alcool: 10.60000<br />Densite: 0.99520","Alcool: 10.50000<br />Densite: 0.99092","Alcool: 10.60000<br />Densite: 0.99380","Alcool: 12.00000<br />Densite: 0.99384","Alcool:  9.00000<br />Densite: 0.99808","Alcool: 10.40000<br />Densite: 0.99524","Alcool:  8.80000<br />Densite: 1.00242","Alcool: 11.00000<br />Densite: 0.99180","Alcool: 10.80000<br />Densite: 0.99215","Alcool:  9.40000<br />Densite: 0.99604","Alcool: 11.50000<br />Densite: 0.99189","Alcool:  9.70000<br />Densite: 0.99636","Alcool:  9.50000<br />Densite: 0.99690","Alcool: 10.60000<br />Densite: 0.99280","Alcool:  9.50000<br />Densite: 0.99420","Alcool:  9.20000<br />Densite: 1.00000","Alcool:  9.40000<br />Densite: 0.99360","Alcool:  9.00000<br />Densite: 0.99827","Alcool:  8.80000<br />Densite: 0.99602","Alcool: 10.70000<br />Densite: 0.99310","Alcool:  9.40000<br />Densite: 0.99660","Alcool:  9.40000<br />Densite: 0.99785","Alcool: 10.00000<br />Densite: 0.99517","Alcool: 14.00000<br />Densite: 0.98746","Alcool:  8.90000<br />Densite: 0.99960","Alcool: 11.30000<br />Densite: 0.99036","Alcool: 11.30000<br />Densite: 0.99350","Alcool: 11.90000<br />Densite: 0.99152","Alcool:  9.70000<br />Densite: 0.99661","Alcool: 11.50000<br />Densite: 0.99495","Alcool:  9.20000<br />Densite: 0.99815","Alcool:  9.80000<br />Densite: 0.99729","Alcool: 11.50000<br />Densite: 0.99370","Alcool: 10.50000<br />Densite: 0.99330","Alcool: 10.90000<br />Densite: 0.99740","Alcool:  9.50000<br />Densite: 0.99560","Alcool: 12.89333<br />Densite: 0.99010","Alcool:  9.20000<br />Densite: 1.00000","Alcool: 12.10000<br />Densite: 0.99226","Alcool:  9.20000<br />Densite: 0.99596","Alcool:  9.90000<br />Densite: 0.99940","Alcool:  9.70000<br />Densite: 0.99636","Alcool: 11.20000<br />Densite: 0.99430","Alcool:  9.50000<br />Densite: 0.99688","Alcool: 12.00000<br />Densite: 0.99216","Alcool:  9.70000<br />Densite: 0.99779","Alcool: 10.60000<br />Densite: 0.99620","Alcool: 13.00000<br />Densite: 0.99240","Alcool: 10.00000<br />Densite: 0.99735","Alcool:  9.40000<br />Densite: 0.99475","Alcool: 10.70000<br />Densite: 0.99650","Alcool: 11.30000<br />Densite: 0.99189","Alcool: 10.90000<br />Densite: 0.99074","Alcool:  9.40000<br />Densite: 0.99680","Alcool:  9.10000<br />Densite: 0.99860","Alcool:  9.80000<br />Densite: 0.99750","Alcool: 10.70000<br />Densite: 0.99380","Alcool: 11.00000<br />Densite: 0.99374","Alcool: 12.60000<br />Densite: 0.98990","Alcool:  9.40000<br />Densite: 0.99370","Alcool: 12.70000<br />Densite: 0.98952","Alcool: 13.00000<br />Densite: 1.00180","Alcool:  9.60000<br />Densite: 0.99696","Alcool: 11.40000<br />Densite: 0.99300","Alcool:  9.80000<br />Densite: 0.99616","Alcool:  9.50000<br />Densite: 0.99416","Alcool: 11.60000<br />Densite: 0.99300","Alcool:  9.00000<br />Densite: 0.99860","Alcool:  9.90000<br />Densite: 0.99605","Alcool: 11.70000<br />Densite: 0.99460","Alcool: 11.70000<br />Densite: 0.99038","Alcool: 10.90000<br />Densite: 0.99126","Alcool: 10.50000<br />Densite: 0.99615","Alcool: 11.50000<br />Densite: 0.99188","Alcool: 11.70000<br />Densite: 0.99100","Alcool:  9.40000<br />Densite: 0.99400","Alcool:  9.80000<br />Densite: 0.99164","Alcool:  9.00000<br />Densite: 0.99398","Alcool:  9.90000<br />Densite: 0.99403","Alcool: 12.50000<br />Densite: 0.99123","Alcool: 11.00000<br />Densite: 0.99404","Alcool:  9.40000<br />Densite: 0.99840","Alcool: 13.10000<br />Densite: 0.99154","Alcool:  9.30000<br />Densite: 0.99820","Alcool: 11.30000<br />Densite: 0.99700","Alcool:  9.50000<br />Densite: 0.99690","Alcool: 10.40000<br />Densite: 0.99200","Alcool: 12.00000<br />Densite: 0.99638","Alcool: 12.90000<br />Densite: 0.99320","Alcool:  9.40000<br />Densite: 0.99502","Alcool: 12.90000<br />Densite: 0.98900","Alcool:  9.90000<br />Densite: 0.99425","Alcool: 12.40000<br />Densite: 0.99272","Alcool:  9.40000<br />Densite: 0.99320","Alcool:  9.80000<br />Densite: 0.99627","Alcool:  9.00000<br />Densite: 0.99494","Alcool: 10.00000<br />Densite: 0.99680","Alcool: 10.80000<br />Densite: 0.99402","Alcool:  9.20000<br />Densite: 0.99720","Alcool: 10.20000<br />Densite: 0.99310","Alcool: 10.50000<br />Densite: 0.99860","Alcool:  9.90000<br />Densite: 0.99560","Alcool: 10.20000<br />Densite: 0.99590","Alcool: 11.50000<br />Densite: 0.99340","Alcool: 10.00000<br />Densite: 0.99790","Alcool: 10.20000<br />Densite: 0.99640","Alcool:  9.30000<br />Densite: 1.00140","Alcool: 10.90000<br />Densite: 0.99140","Alcool: 12.00000<br />Densite: 0.99620","Alcool:  9.40000<br />Densite: 0.99820","Alcool:  9.30000<br />Densite: 0.99570","Alcool:  9.90000<br />Densite: 0.99498","Alcool:  9.20000<br />Densite: 0.99860","Alcool: 12.50000<br />Densite: 0.99042","Alcool:  9.50000<br />Densite: 0.99900","Alcool: 12.00000<br />Densite: 0.99260","Alcool: 10.40000<br />Densite: 0.99152","Alcool:  9.90000<br />Densite: 0.99576","Alcool:  9.70000<br />Densite: 0.99975","Alcool:  9.40000<br />Densite: 0.99930","Alcool:  9.50000<br />Densite: 0.99350","Alcool:  9.60000<br />Densite: 0.99537","Alcool:  9.90000<br />Densite: 0.99625","Alcool:  9.10000<br />Densite: 0.99860","Alcool: 10.70000<br />Densite: 0.99360","Alcool: 12.60000<br />Densite: 0.99014","Alcool: 10.50000<br />Densite: 0.99320","Alcool:  9.90000<br />Densite: 0.99324","Alcool: 11.80000<br />Densite: 0.99161","Alcool: 11.50000<br />Densite: 0.98964","Alcool: 11.60000<br />Densite: 0.99378","Alcool: 11.30000<br />Densite: 0.99058","Alcool: 11.95000<br />Densite: 0.99348","Alcool:  9.40000<br />Densite: 0.99560","Alcool: 11.40000<br />Densite: 0.99053","Alcool: 12.00000<br />Densite: 0.99019","Alcool: 10.40000<br />Densite: 0.99202","Alcool: 12.00000<br />Densite: 0.99184","Alcool: 13.10000<br />Densite: 0.98922","Alcool: 10.40000<br />Densite: 0.99960","Alcool: 10.50000<br />Densite: 0.99290","Alcool:  9.20000<br />Densite: 0.99910","Alcool: 10.90000<br />Densite: 0.99176","Alcool:  8.90000<br />Densite: 0.99976","Alcool:  9.40000<br />Densite: 0.99820","Alcool: 10.00000<br />Densite: 0.99434","Alcool: 11.60000<br />Densite: 0.99110","Alcool: 12.00000<br />Densite: 0.99060","Alcool: 10.90000<br />Densite: 0.99638","Alcool:  9.60000<br />Densite: 0.99553","Alcool: 11.70000<br />Densite: 0.99120","Alcool: 12.40000<br />Densite: 0.99000","Alcool: 12.00000<br />Densite: 0.99090","Alcool: 11.50000<br />Densite: 0.99084","Alcool:  9.30000<br />Densite: 0.99980","Alcool:  9.90000<br />Densite: 0.99200","Alcool: 10.60000<br />Densite: 0.98985","Alcool:  8.70000<br />Densite: 0.99840","Alcool: 10.80000<br />Densite: 0.99220","Alcool: 11.40000<br />Densite: 0.99300","Alcool: 11.00000<br />Densite: 0.99640","Alcool: 11.90000<br />Densite: 0.99200","Alcool:  9.00000<br />Densite: 0.99490","Alcool: 10.00000<br />Densite: 0.99425","Alcool: 11.40000<br />Densite: 0.99176","Alcool: 11.40000<br />Densite: 0.99360","Alcool: 11.40000<br />Densite: 0.99043","Alcool:  9.90000<br />Densite: 0.99340","Alcool: 11.40000<br />Densite: 0.99182","Alcool:  9.40000<br />Densite: 0.99512","Alcool: 11.45000<br />Densite: 0.99020","Alcool:  9.10000<br />Densite: 0.99840","Alcool:  9.20000<br />Densite: 0.99782","Alcool: 10.80000<br />Densite: 0.99590","Alcool:  9.80000<br />Densite: 0.99580","Alcool: 12.20000<br />Densite: 0.99119","Alcool: 12.40000<br />Densite: 0.99100","Alcool:  9.00000<br />Densite: 0.99675","Alcool:  9.40000<br />Densite: 1.00060","Alcool:  9.50000<br />Densite: 0.99784","Alcool:  9.20000<br />Densite: 0.99320","Alcool:  9.20000<br />Densite: 0.99577","Alcool: 10.80000<br />Densite: 0.99040","Alcool: 10.20000<br />Densite: 0.99575","Alcool: 11.70000<br />Densite: 0.99090","Alcool: 10.60000<br />Densite: 0.99522","Alcool:  9.30000<br />Densite: 0.99413","Alcool: 10.20000<br />Densite: 0.99271","Alcool: 11.50000<br />Densite: 0.99112","Alcool:  9.10000<br />Densite: 0.99830","Alcool:  9.20000<br />Densite: 0.99528","Alcool:  8.70000<br />Densite: 1.00044","Alcool: 12.30000<br />Densite: 0.98940","Alcool: 11.30000<br />Densite: 0.99032","Alcool:  9.10000<br />Densite: 0.99880","Alcool: 11.00000<br />Densite: 0.99390","Alcool: 12.30000<br />Densite: 0.99021","Alcool: 10.50000<br />Densite: 0.99380","Alcool: 10.10000<br />Densite: 0.99910","Alcool:  9.30000<br />Densite: 0.99428","Alcool: 11.10000<br />Densite: 0.99490","Alcool:  9.90000<br />Densite: 0.99340","Alcool:  9.40000<br />Densite: 0.99610","Alcool: 10.20000<br />Densite: 0.99320","Alcool: 10.90000<br />Densite: 0.99280","Alcool:  9.80000<br />Densite: 0.99630","Alcool:  9.70000<br />Densite: 0.99380","Alcool: 11.10000<br />Densite: 0.99376","Alcool:  9.10000<br />Densite: 0.99834","Alcool:  8.90000<br />Densite: 0.99590","Alcool:  9.20000<br />Densite: 0.99304","Alcool:  9.40000<br />Densite: 0.99656","Alcool:  9.40000<br />Densite: 0.99370","Alcool:  9.40000<br />Densite: 0.99840","Alcool:  9.20000<br />Densite: 0.99830","Alcool: 10.60000<br />Densite: 0.99270","Alcool:  9.80000<br />Densite: 0.99400","Alcool: 10.20000<br />Densite: 0.99900","Alcool: 10.00000<br />Densite: 0.99240","Alcool: 11.60000<br />Densite: 0.98961","Alcool: 11.70000<br />Densite: 0.99516","Alcool: 10.40000<br />Densite: 0.99354","Alcool: 11.30000<br />Densite: 0.99058","Alcool:  9.40000<br />Densite: 0.99780","Alcool: 11.80000<br />Densite: 0.99500","Alcool: 10.20000<br />Densite: 1.00060","Alcool: 11.20000<br />Densite: 0.99430","Alcool: 10.40000<br />Densite: 0.99310","Alcool:  9.40000<br />Densite: 0.99740","Alcool: 10.60000<br />Densite: 0.99471","Alcool:  9.80000<br />Densite: 0.99428","Alcool: 11.60000<br />Densite: 0.99126","Alcool: 10.80000<br />Densite: 0.99299","Alcool:  9.10000<br />Densite: 0.99360","Alcool:  9.60000<br />Densite: 0.99790","Alcool: 11.30000<br />Densite: 0.99540","Alcool: 11.30000<br />Densite: 0.99360","Alcool:  9.60000<br />Densite: 0.99480","Alcool: 11.10000<br />Densite: 0.99244","Alcool:  8.70000<br />Densite: 0.99750","Alcool: 10.60000<br />Densite: 1.00295","Alcool: 13.40000<br />Densite: 0.98960","Alcool: 12.80000<br />Densite: 0.99378","Alcool: 11.30000<br />Densite: 0.99470","Alcool:  9.90000<br />Densite: 0.99370","Alcool:  9.50000<br />Densite: 0.99940","Alcool: 12.50000<br />Densite: 0.99140","Alcool: 11.20000<br />Densite: 0.99644","Alcool:  8.90000<br />Densite: 0.99685","Alcool:  9.50000<br />Densite: 0.99782","Alcool: 11.50000<br />Densite: 0.99572","Alcool: 10.20000<br />Densite: 0.99742","Alcool: 10.50000<br />Densite: 0.99300","Alcool: 11.10000<br />Densite: 0.99630","Alcool:  9.50000<br />Densite: 0.99590","Alcool:  9.60000<br />Densite: 1.00020","Alcool: 11.30000<br />Densite: 0.99014","Alcool: 10.10000<br />Densite: 0.99810","Alcool: 10.50000<br />Densite: 0.99456","Alcool: 11.10000<br />Densite: 0.99268","Alcool: 10.20000<br />Densite: 0.99850","Alcool: 11.00000<br />Densite: 0.99640","Alcool: 11.00000<br />Densite: 0.99880","Alcool: 12.20000<br />Densite: 0.99077","Alcool: 10.50000<br />Densite: 0.99490","Alcool:  9.90000<br />Densite: 0.99610","Alcool:  8.80000<br />Densite: 0.99941","Alcool:  9.80000<br />Densite: 0.99438","Alcool:  9.20000<br />Densite: 0.99970","Alcool: 10.50000<br />Densite: 0.99659","Alcool:  8.90000<br />Densite: 0.99862","Alcool: 10.10000<br />Densite: 0.99250","Alcool: 11.90000<br />Densite: 0.99088","Alcool: 10.00000<br />Densite: 0.99814","Alcool: 10.60000<br />Densite: 0.99828","Alcool:  9.20000<br />Densite: 1.00100","Alcool: 10.53333<br />Densite: 0.99313","Alcool: 11.50000<br />Densite: 0.99280","Alcool:  9.80000<br />Densite: 0.99440","Alcool: 11.30000<br />Densite: 0.99040","Alcool:  9.90000<br />Densite: 0.99784","Alcool:  9.40000<br />Densite: 0.99692","Alcool: 12.30000<br />Densite: 0.99220","Alcool: 11.50000<br />Densite: 0.99890","Alcool: 10.10000<br />Densite: 0.99260","Alcool:  9.50000<br />Densite: 0.99544","Alcool:  9.00000<br />Densite: 0.99625","Alcool: 10.10000<br />Densite: 0.99658","Alcool: 12.50000<br />Densite: 0.99000","Alcool: 10.60000<br />Densite: 0.99320","Alcool: 11.40000<br />Densite: 0.99270","Alcool:  9.30000<br />Densite: 0.99520","Alcool:  9.90000<br />Densite: 0.99622","Alcool:  9.10000<br />Densite: 0.99860","Alcool:  9.50000<br />Densite: 0.99270","Alcool:  9.20000<br />Densite: 1.00051","Alcool: 13.55000<br />Densite: 0.98758","Alcool: 12.50000<br />Densite: 0.99151","Alcool: 10.40000<br />Densite: 0.99230","Alcool: 11.00000<br />Densite: 0.99732","Alcool: 12.10000<br />Densite: 0.99286","Alcool: 12.30000<br />Densite: 0.98993","Alcool: 11.40000<br />Densite: 0.99346","Alcool: 11.60000<br />Densite: 0.99710","Alcool: 13.00000<br />Densite: 0.98854","Alcool:  9.40000<br />Densite: 0.99980","Alcool: 13.40000<br />Densite: 0.98862","Alcool:  9.00000<br />Densite: 0.99790","Alcool:  8.70000<br />Densite: 0.99740","Alcool:  8.70000<br />Densite: 0.99750","Alcool:  9.40000<br />Densite: 0.99693","Alcool: 11.20000<br />Densite: 0.99082","Alcool:  9.80000<br />Densite: 0.99458","Alcool:  9.70000<br />Densite: 0.99748","Alcool:  9.30000<br />Densite: 0.99690","Alcool:  9.50000<br />Densite: 0.99727","Alcool:  9.10000<br />Densite: 0.99884","Alcool: 10.40000<br />Densite: 0.99450","Alcool: 10.90000<br />Densite: 0.99619","Alcool:  9.90000<br />Densite: 0.99287","Alcool: 11.00000<br />Densite: 0.99336","Alcool: 10.00000<br />Densite: 0.99520","Alcool:  9.20000<br />Densite: 0.99720","Alcool: 12.10000<br />Densite: 0.99110","Alcool:  9.70000<br />Densite: 0.99743","Alcool:  9.90000<br />Densite: 0.99340","Alcool: 10.50000<br />Densite: 0.99620","Alcool: 10.10000<br />Densite: 0.99204","Alcool: 10.90000<br />Densite: 0.99859","Alcool: 11.20000<br />Densite: 0.99960","Alcool: 11.30000<br />Densite: 0.99280","Alcool: 10.10000<br />Densite: 0.99780","Alcool:  9.40000<br />Densite: 0.99340","Alcool: 10.00000<br />Densite: 0.99550","Alcool: 10.30000<br />Densite: 0.99690","Alcool:  9.50000<br />Densite: 0.99790","Alcool: 12.60000<br />Densite: 0.98862","Alcool:  8.80000<br />Densite: 0.99800","Alcool: 12.00000<br />Densite: 0.98972","Alcool: 10.20000<br />Densite: 0.99271","Alcool: 11.20000<br />Densite: 0.99076","Alcool: 12.00000<br />Densite: 0.99076","Alcool:  9.50000<br />Densite: 0.99700","Alcool:  9.60000<br />Densite: 0.99760","Alcool: 11.40000<br />Densite: 0.99048","Alcool: 11.70000<br />Densite: 0.99270","Alcool:  9.80000<br />Densite: 0.99712","Alcool: 10.20000<br />Densite: 0.99612","Alcool: 11.00000<br />Densite: 0.99111","Alcool: 10.30000<br />Densite: 0.99270","Alcool:  9.00000<br />Densite: 0.99840","Alcool: 11.00000<br />Densite: 0.99060","Alcool: 12.50000<br />Densite: 0.99140","Alcool: 12.30000<br />Densite: 0.99316","Alcool: 12.50000<br />Densite: 0.99080","Alcool:  9.70000<br />Densite: 0.99710","Alcool: 11.10000<br />Densite: 0.99237","Alcool: 12.00000<br />Densite: 0.99730","Alcool: 10.00000<br />Densite: 0.99593","Alcool: 10.40000<br />Densite: 0.99970","Alcool:  9.30000<br />Densite: 0.99840","Alcool: 10.40000<br />Densite: 0.99256","Alcool: 12.05000<br />Densite: 0.98970","Alcool: 11.90000<br />Densite: 0.99642","Alcool:  9.50000<br />Densite: 0.99520","Alcool: 11.00000<br />Densite: 0.99114","Alcool: 10.20000<br />Densite: 0.99460","Alcool: 11.70000<br />Densite: 0.99460","Alcool: 10.70000<br />Densite: 0.99178","Alcool: 10.20000<br />Densite: 0.99669","Alcool:  9.00000<br />Densite: 1.00080","Alcool: 12.00000<br />Densite: 0.99518","Alcool: 11.70000<br />Densite: 0.99314","Alcool:  9.40000<br />Densite: 0.99754","Alcool: 12.70000<br />Densite: 0.98980","Alcool:  8.90000<br />Densite: 0.99610","Alcool: 10.00000<br />Densite: 0.99218","Alcool: 11.50000<br />Densite: 0.99110","Alcool:  9.40000<br />Densite: 0.99530","Alcool:  9.70000<br />Densite: 0.99297","Alcool: 11.80000<br />Densite: 0.99456","Alcool:  9.50000<br />Densite: 0.99938","Alcool:  9.20000<br />Densite: 0.99880","Alcool:  9.80000<br />Densite: 0.99616","Alcool:  9.10000<br />Densite: 0.99550","Alcool: 10.70000<br />Densite: 0.99605"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[8,8.075949367088608,8.151898734177216,8.2278481012658222,8.3037974683544302,8.3797468354430382,8.4556962025316462,8.5316455696202524,8.6075949367088604,8.6835443037974684,8.7594936708860764,8.8354430379746844,8.9113924050632907,8.9873417721518987,9.0632911392405067,9.1392405063291147,9.2151898734177209,9.2911392405063289,9.3670886075949369,9.4430379746835449,9.5189873417721529,9.5949367088607591,9.6708860759493671,9.7468354430379751,9.8227848101265813,9.8987341772151893,9.9746835443037973,10.050632911392405,10.126582278481013,10.202531645569621,10.278481012658228,10.354430379746836,10.430379746835444,10.50632911392405,10.582278481012658,10.658227848101266,10.734177215189874,10.810126582278482,10.88607594936709,10.962025316455696,11.037974683544304,11.113924050632912,11.189873417721518,11.265822784810126,11.341772151898734,11.417721518987342,11.49367088607595,11.569620253164556,11.645569620253164,11.721518987341772,11.79746835443038,11.873417721518987,11.949367088607595,12.025316455696203,12.101265822784811,12.177215189873419,12.253164556962027,12.329113924050633,12.405063291139241,12.481012658227847,12.556962025316455,12.632911392405063,12.708860759493671,12.784810126582279,12.860759493670887,12.936708860759495,13.012658227848101,13.088607594936709,13.164556962025316,13.240506329113924,13.316455696202532,13.39240506329114,13.468354430379748,13.544303797468356,13.620253164556962,13.69620253164557,13.772151898734178,13.848101265822784,13.924050632911392,14],"y":[0.99810489593468565,0.99808189645579948,0.99805646123859315,0.99802774091469582,0.99799488611573606,0.99795704747334235,0.99791337561914362,0.99786302118476844,0.99780513480184541,0.99773886710200343,0.99766336871687111,0.9975777902780768,0.99748128241724998,0.99737299576601846,0.99725208095601114,0.99711895559130226,0.99698002376527806,0.99683588779477328,0.99668605512347852,0.99653029347637612,0.99637055157260357,0.99620940798733093,0.99604938339260018,0.99589299846045287,0.99574262630429333,0.99559752208231689,0.99545634694435836,0.99531829363425817,0.99518255489585561,0.99504832347299055,0.99491479210950318,0.99478049280367853,0.9946438430832738,0.9945060088875608,0.99436828758996931,0.99423197656392981,0.99409837318287264,0.9939688169341272,0.99384660024935112,0.99373103479732483,0.99361911416418736,0.9935078319360765,0.99339418169913107,0.99327515703948921,0.99314899846364024,0.99302042500039645,0.99289103658823596,0.99276173018930036,0.99263340276573186,0.99250695127967226,0.99238327269326354,0.9922632639686475,0.99214782206796637,0.99203503807473747,0.9919223264485254,0.99180970347556363,0.99169718563003539,0.99158478938612427,0.99147253121801393,0.99136042759988785,0.9912484950059296,0.99113674991032219,0.99102520878725009,0.99091388811089609,0.99080280435544399,0.99069197399507758,0.99058141350397999,0.99047113935633491,0.99036116802632568,0.99025151598813643,0.99014219971594986,0.99003323568395019,0.98992464036632066,0.98981643023724464,0.98970862177090579,0.98960123144148782,0.98949427572317428,0.98938777109014864,0.98928173401659414,0.98917618097669457],"text":["Alcool:  8.000000<br />Densite: 0.9981049","Alcool:  8.075949<br />Densite: 0.9980819","Alcool:  8.151899<br />Densite: 0.9980565","Alcool:  8.227848<br />Densite: 0.9980277","Alcool:  8.303797<br />Densite: 0.9979949","Alcool:  8.379747<br />Densite: 0.9979570","Alcool:  8.455696<br />Densite: 0.9979134","Alcool:  8.531646<br />Densite: 0.9978630","Alcool:  8.607595<br />Densite: 0.9978051","Alcool:  8.683544<br />Densite: 0.9977389","Alcool:  8.759494<br />Densite: 0.9976634","Alcool:  8.835443<br />Densite: 0.9975778","Alcool:  8.911392<br />Densite: 0.9974813","Alcool:  8.987342<br />Densite: 0.9973730","Alcool:  9.063291<br />Densite: 0.9972521","Alcool:  9.139241<br />Densite: 0.9971190","Alcool:  9.215190<br />Densite: 0.9969800","Alcool:  9.291139<br />Densite: 0.9968359","Alcool:  9.367089<br />Densite: 0.9966861","Alcool:  9.443038<br />Densite: 0.9965303","Alcool:  9.518987<br />Densite: 0.9963706","Alcool:  9.594937<br />Densite: 0.9962094","Alcool:  9.670886<br />Densite: 0.9960494","Alcool:  9.746835<br />Densite: 0.9958930","Alcool:  9.822785<br />Densite: 0.9957426","Alcool:  9.898734<br />Densite: 0.9955975","Alcool:  9.974684<br />Densite: 0.9954563","Alcool: 10.050633<br />Densite: 0.9953183","Alcool: 10.126582<br />Densite: 0.9951826","Alcool: 10.202532<br />Densite: 0.9950483","Alcool: 10.278481<br />Densite: 0.9949148","Alcool: 10.354430<br />Densite: 0.9947805","Alcool: 10.430380<br />Densite: 0.9946438","Alcool: 10.506329<br />Densite: 0.9945060","Alcool: 10.582278<br />Densite: 0.9943683","Alcool: 10.658228<br />Densite: 0.9942320","Alcool: 10.734177<br />Densite: 0.9940984","Alcool: 10.810127<br />Densite: 0.9939688","Alcool: 10.886076<br />Densite: 0.9938466","Alcool: 10.962025<br />Densite: 0.9937310","Alcool: 11.037975<br />Densite: 0.9936191","Alcool: 11.113924<br />Densite: 0.9935078","Alcool: 11.189873<br />Densite: 0.9933942","Alcool: 11.265823<br />Densite: 0.9932752","Alcool: 11.341772<br />Densite: 0.9931490","Alcool: 11.417722<br />Densite: 0.9930204","Alcool: 11.493671<br />Densite: 0.9928910","Alcool: 11.569620<br />Densite: 0.9927617","Alcool: 11.645570<br />Densite: 0.9926334","Alcool: 11.721519<br />Densite: 0.9925070","Alcool: 11.797468<br />Densite: 0.9923833","Alcool: 11.873418<br />Densite: 0.9922633","Alcool: 11.949367<br />Densite: 0.9921478","Alcool: 12.025316<br />Densite: 0.9920350","Alcool: 12.101266<br />Densite: 0.9919223","Alcool: 12.177215<br />Densite: 0.9918097","Alcool: 12.253165<br />Densite: 0.9916972","Alcool: 12.329114<br />Densite: 0.9915848","Alcool: 12.405063<br />Densite: 0.9914725","Alcool: 12.481013<br />Densite: 0.9913604","Alcool: 12.556962<br />Densite: 0.9912485","Alcool: 12.632911<br />Densite: 0.9911367","Alcool: 12.708861<br />Densite: 0.9910252","Alcool: 12.784810<br />Densite: 0.9909139","Alcool: 12.860759<br />Densite: 0.9908028","Alcool: 12.936709<br />Densite: 0.9906920","Alcool: 13.012658<br />Densite: 0.9905814","Alcool: 13.088608<br />Densite: 0.9904711","Alcool: 13.164557<br />Densite: 0.9903612","Alcool: 13.240506<br />Densite: 0.9902515","Alcool: 13.316456<br />Densite: 0.9901422","Alcool: 13.392405<br />Densite: 0.9900332","Alcool: 13.468354<br />Densite: 0.9899246","Alcool: 13.544304<br />Densite: 0.9898164","Alcool: 13.620253<br />Densite: 0.9897086","Alcool: 13.696203<br />Densite: 0.9896012","Alcool: 13.772152<br />Densite: 0.9894943","Alcool: 13.848101<br />Densite: 0.9893878","Alcool: 13.924051<br />Densite: 0.9892817","Alcool: 14.000000<br />Densite: 0.9891762"],"type":"scatter","mode":"lines","name":"fitted values","line":{"width":3.7795275590551185,"color":"rgba(51,102,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[8,8.075949367088608,8.151898734177216,8.2278481012658222,8.3037974683544302,8.3797468354430382,8.4556962025316462,8.5316455696202524,8.6075949367088604,8.6835443037974684,8.7594936708860764,8.8354430379746844,8.9113924050632907,8.9873417721518987,9.0632911392405067,9.1392405063291147,9.2151898734177209,9.2911392405063289,9.3670886075949369,9.4430379746835449,9.5189873417721529,9.5949367088607591,9.6708860759493671,9.7468354430379751,9.8227848101265813,9.8987341772151893,9.9746835443037973,10.050632911392405,10.126582278481013,10.202531645569621,10.278481012658228,10.354430379746836,10.430379746835444,10.50632911392405,10.582278481012658,10.658227848101266,10.734177215189874,10.810126582278482,10.88607594936709,10.962025316455696,11.037974683544304,11.113924050632912,11.189873417721518,11.265822784810126,11.341772151898734,11.417721518987342,11.49367088607595,11.569620253164556,11.645569620253164,11.721518987341772,11.79746835443038,11.873417721518987,11.949367088607595,12.025316455696203,12.101265822784811,12.177215189873419,12.253164556962027,12.329113924050633,12.405063291139241,12.481012658227847,12.556962025316455,12.632911392405063,12.708860759493671,12.784810126582279,12.860759493670887,12.936708860759495,13.012658227848101,13.088607594936709,13.164556962025316,13.240506329113924,13.316455696202532,13.39240506329114,13.468354430379748,13.544303797468356,13.620253164556962,13.69620253164557,13.772151898734178,13.848101265822784,13.924050632911392,14,14,14,13.924050632911392,13.848101265822784,13.772151898734178,13.69620253164557,13.620253164556962,13.544303797468356,13.468354430379748,13.39240506329114,13.316455696202532,13.240506329113924,13.164556962025316,13.088607594936709,13.012658227848101,12.936708860759495,12.860759493670887,12.784810126582279,12.708860759493671,12.632911392405063,12.556962025316455,12.481012658227847,12.405063291139241,12.329113924050633,12.253164556962027,12.177215189873419,12.101265822784811,12.025316455696203,11.949367088607595,11.873417721518987,11.79746835443038,11.721518987341772,11.645569620253164,11.569620253164556,11.49367088607595,11.417721518987342,11.341772151898734,11.265822784810126,11.189873417721518,11.113924050632912,11.037974683544304,10.962025316455696,10.88607594936709,10.810126582278482,10.734177215189874,10.658227848101266,10.582278481012658,10.50632911392405,10.430379746835444,10.354430379746836,10.278481012658228,10.202531645569621,10.126582278481013,10.050632911392405,9.9746835443037973,9.8987341772151893,9.8227848101265813,9.7468354430379751,9.6708860759493671,9.5949367088607591,9.5189873417721529,9.4430379746835449,9.3670886075949369,9.2911392405063289,9.2151898734177209,9.1392405063291147,9.0632911392405067,8.9873417721518987,8.9113924050632907,8.8354430379746844,8.7594936708860764,8.6835443037974684,8.6075949367088604,8.5316455696202524,8.4556962025316462,8.3797468354430382,8.3037974683544302,8.2278481012658222,8.151898734177216,8.075949367088608,8,8],"y":[0.99604232825280581,0.99620261369991514,0.99635267148691931,0.99649126094967189,0.99661712253935675,0.99672897817126183,0.99682553200297186,0.99690547227116577,0.99696747539075725,0.99701021450399441,0.99703237616787299,0.99703269061745681,0.99700998148351028,0.99696323548260091,0.99689167334721362,0.99679594536788774,0.99668254867669492,0.99655314634007397,0.99640898253399446,0.99625219594852121,0.99608809000823839,0.99592030614056559,0.99575224678856722,0.9955879747027695,0.99543224482969372,0.99528821320127514,0.99514950085183052,0.99500898891062184,0.99486387681889887,0.99471689529888763,0.99457438942151688,0.99444131101044031,0.99431239745536737,0.99418118599958738,0.99404386663776945,0.99390161224227036,0.99376054001877046,0.99362911209573168,0.99351293073728064,0.99340582753604367,0.99329966299553374,0.9931888813789822,0.99307153572910078,0.99294857265399883,0.99282212997814612,0.99269477559192099,0.99256663827330815,0.99243780092475165,0.99230873598398162,0.99218035132053239,0.99205393276700682,0.99193098782893097,0.99181301136676081,0.9916975756221994,0.99158104892091881,0.99146301896514144,0.9913429709162459,0.991220323877127,0.99109447746121382,0.99096486282524021,0.99083098924380553,0.99069247690001938,0.99054907025817329,0.99040063241109022,0.9902471258936667,0.9900885874053269,0.9899251027874354,0.98975678604566197,0.9895837637508601,0.98940616454342556,0.98922411273471478,0.98903772485957753,0.98884710818610388,0.98865236043092553,0.98845357015904811,0.98825081752965171,0.98804417517978693,0.98783370912529722,0.98761947961404906,0.9874015419006581,0.9874015419006581,0.99095082005273105,0.99094398841913922,0.99094183305500005,0.99094437626656162,0.99095164535332392,0.99096367338276348,0.99098050004356375,0.99100217254653744,0.99102874650832284,0.99106028669718493,0.99109686743284731,0.99113857230179125,0.99118549266700784,0.99123772422052459,0.99129536058482826,0.99135848281722128,0.99142714381070196,0.99150134731632689,0.991581022920625,0.99166600076805367,0.99175599237453549,0.99185058497481404,0.99194925489512153,0.99205140034382489,0.99215638798598582,0.992263603976132,0.99237250052727555,0.99248263276917192,0.99259554010836404,0.99271261261952026,0.99283355123881212,0.99295806954748211,0.99308565945384908,0.99321543490316377,0.9933460744088719,0.99347586694913437,0.99360174142497959,0.99371682766916136,0.9938267824931708,0.99393856533284097,0.99405624205860599,0.9941802697614216,0.99430852177252271,0.99443620634697483,0.99456234088558926,0.99469270854216918,0.99483083177553422,0.99497528871118024,0.99511967459691675,0.99525519479748947,0.99537975164709347,0.99550123297281234,0.99562759835789449,0.99576319303688621,0.99590683096335864,0.99605300777889294,0.99619802221813625,0.99634651999663315,0.99649850983409627,0.99665301313696875,0.99680839100423102,0.99696312771296258,0.99711862924947259,0.99727749885386119,0.99744196581471678,0.99761248856480866,0.997782756049436,0.99795258335098969,0.9981228899386968,0.99829436126586923,0.99846751970001246,0.99864279421293356,0.99882057009837111,0.99900121923531537,0.99918511677542288,0.99937264969211537,0.99956422087971974,0.999760250990267,0.99996117921168381,1.0001674636165656,0.99604232825280581],"text":["Alcool:  8.000000<br />Densite: 0.9981049","Alcool:  8.075949<br />Densite: 0.9980819","Alcool:  8.151899<br />Densite: 0.9980565","Alcool:  8.227848<br />Densite: 0.9980277","Alcool:  8.303797<br />Densite: 0.9979949","Alcool:  8.379747<br />Densite: 0.9979570","Alcool:  8.455696<br />Densite: 0.9979134","Alcool:  8.531646<br />Densite: 0.9978630","Alcool:  8.607595<br />Densite: 0.9978051","Alcool:  8.683544<br />Densite: 0.9977389","Alcool:  8.759494<br />Densite: 0.9976634","Alcool:  8.835443<br />Densite: 0.9975778","Alcool:  8.911392<br />Densite: 0.9974813","Alcool:  8.987342<br />Densite: 0.9973730","Alcool:  9.063291<br />Densite: 0.9972521","Alcool:  9.139241<br />Densite: 0.9971190","Alcool:  9.215190<br />Densite: 0.9969800","Alcool:  9.291139<br />Densite: 0.9968359","Alcool:  9.367089<br />Densite: 0.9966861","Alcool:  9.443038<br />Densite: 0.9965303","Alcool:  9.518987<br />Densite: 0.9963706","Alcool:  9.594937<br />Densite: 0.9962094","Alcool:  9.670886<br />Densite: 0.9960494","Alcool:  9.746835<br />Densite: 0.9958930","Alcool:  9.822785<br />Densite: 0.9957426","Alcool:  9.898734<br />Densite: 0.9955975","Alcool:  9.974684<br />Densite: 0.9954563","Alcool: 10.050633<br />Densite: 0.9953183","Alcool: 10.126582<br />Densite: 0.9951826","Alcool: 10.202532<br />Densite: 0.9950483","Alcool: 10.278481<br />Densite: 0.9949148","Alcool: 10.354430<br />Densite: 0.9947805","Alcool: 10.430380<br />Densite: 0.9946438","Alcool: 10.506329<br />Densite: 0.9945060","Alcool: 10.582278<br />Densite: 0.9943683","Alcool: 10.658228<br />Densite: 0.9942320","Alcool: 10.734177<br />Densite: 0.9940984","Alcool: 10.810127<br />Densite: 0.9939688","Alcool: 10.886076<br />Densite: 0.9938466","Alcool: 10.962025<br />Densite: 0.9937310","Alcool: 11.037975<br />Densite: 0.9936191","Alcool: 11.113924<br />Densite: 0.9935078","Alcool: 11.189873<br />Densite: 0.9933942","Alcool: 11.265823<br />Densite: 0.9932752","Alcool: 11.341772<br />Densite: 0.9931490","Alcool: 11.417722<br />Densite: 0.9930204","Alcool: 11.493671<br />Densite: 0.9928910","Alcool: 11.569620<br />Densite: 0.9927617","Alcool: 11.645570<br />Densite: 0.9926334","Alcool: 11.721519<br />Densite: 0.9925070","Alcool: 11.797468<br />Densite: 0.9923833","Alcool: 11.873418<br />Densite: 0.9922633","Alcool: 11.949367<br />Densite: 0.9921478","Alcool: 12.025316<br />Densite: 0.9920350","Alcool: 12.101266<br />Densite: 0.9919223","Alcool: 12.177215<br />Densite: 0.9918097","Alcool: 12.253165<br />Densite: 0.9916972","Alcool: 12.329114<br />Densite: 0.9915848","Alcool: 12.405063<br />Densite: 0.9914725","Alcool: 12.481013<br />Densite: 0.9913604","Alcool: 12.556962<br />Densite: 0.9912485","Alcool: 12.632911<br />Densite: 0.9911367","Alcool: 12.708861<br />Densite: 0.9910252","Alcool: 12.784810<br />Densite: 0.9909139","Alcool: 12.860759<br />Densite: 0.9908028","Alcool: 12.936709<br />Densite: 0.9906920","Alcool: 13.012658<br />Densite: 0.9905814","Alcool: 13.088608<br />Densite: 0.9904711","Alcool: 13.164557<br />Densite: 0.9903612","Alcool: 13.240506<br />Densite: 0.9902515","Alcool: 13.316456<br />Densite: 0.9901422","Alcool: 13.392405<br />Densite: 0.9900332","Alcool: 13.468354<br />Densite: 0.9899246","Alcool: 13.544304<br />Densite: 0.9898164","Alcool: 13.620253<br />Densite: 0.9897086","Alcool: 13.696203<br />Densite: 0.9896012","Alcool: 13.772152<br />Densite: 0.9894943","Alcool: 13.848101<br />Densite: 0.9893878","Alcool: 13.924051<br />Densite: 0.9892817","Alcool: 14.000000<br />Densite: 0.9891762","Alcool: 14.000000<br />Densite: 0.9891762","Alcool: 14.000000<br />Densite: 0.9891762","Alcool: 13.924051<br />Densite: 0.9892817","Alcool: 13.848101<br />Densite: 0.9893878","Alcool: 13.772152<br />Densite: 0.9894943","Alcool: 13.696203<br />Densite: 0.9896012","Alcool: 13.620253<br />Densite: 0.9897086","Alcool: 13.544304<br />Densite: 0.9898164","Alcool: 13.468354<br />Densite: 0.9899246","Alcool: 13.392405<br />Densite: 0.9900332","Alcool: 13.316456<br />Densite: 0.9901422","Alcool: 13.240506<br />Densite: 0.9902515","Alcool: 13.164557<br />Densite: 0.9903612","Alcool: 13.088608<br />Densite: 0.9904711","Alcool: 13.012658<br />Densite: 0.9905814","Alcool: 12.936709<br />Densite: 0.9906920","Alcool: 12.860759<br />Densite: 0.9908028","Alcool: 12.784810<br />Densite: 0.9909139","Alcool: 12.708861<br />Densite: 0.9910252","Alcool: 12.632911<br />Densite: 0.9911367","Alcool: 12.556962<br />Densite: 0.9912485","Alcool: 12.481013<br />Densite: 0.9913604","Alcool: 12.405063<br />Densite: 0.9914725","Alcool: 12.329114<br />Densite: 0.9915848","Alcool: 12.253165<br />Densite: 0.9916972","Alcool: 12.177215<br />Densite: 0.9918097","Alcool: 12.101266<br />Densite: 0.9919223","Alcool: 12.025316<br />Densite: 0.9920350","Alcool: 11.949367<br />Densite: 0.9921478","Alcool: 11.873418<br />Densite: 0.9922633","Alcool: 11.797468<br />Densite: 0.9923833","Alcool: 11.721519<br />Densite: 0.9925070","Alcool: 11.645570<br />Densite: 0.9926334","Alcool: 11.569620<br />Densite: 0.9927617","Alcool: 11.493671<br />Densite: 0.9928910","Alcool: 11.417722<br />Densite: 0.9930204","Alcool: 11.341772<br />Densite: 0.9931490","Alcool: 11.265823<br />Densite: 0.9932752","Alcool: 11.189873<br />Densite: 0.9933942","Alcool: 11.113924<br />Densite: 0.9935078","Alcool: 11.037975<br />Densite: 0.9936191","Alcool: 10.962025<br />Densite: 0.9937310","Alcool: 10.886076<br />Densite: 0.9938466","Alcool: 10.810127<br />Densite: 0.9939688","Alcool: 10.734177<br />Densite: 0.9940984","Alcool: 10.658228<br />Densite: 0.9942320","Alcool: 10.582278<br />Densite: 0.9943683","Alcool: 10.506329<br />Densite: 0.9945060","Alcool: 10.430380<br />Densite: 0.9946438","Alcool: 10.354430<br />Densite: 0.9947805","Alcool: 10.278481<br />Densite: 0.9949148","Alcool: 10.202532<br />Densite: 0.9950483","Alcool: 10.126582<br />Densite: 0.9951826","Alcool: 10.050633<br />Densite: 0.9953183","Alcool:  9.974684<br />Densite: 0.9954563","Alcool:  9.898734<br />Densite: 0.9955975","Alcool:  9.822785<br />Densite: 0.9957426","Alcool:  9.746835<br />Densite: 0.9958930","Alcool:  9.670886<br />Densite: 0.9960494","Alcool:  9.594937<br />Densite: 0.9962094","Alcool:  9.518987<br />Densite: 0.9963706","Alcool:  9.443038<br />Densite: 0.9965303","Alcool:  9.367089<br />Densite: 0.9966861","Alcool:  9.291139<br />Densite: 0.9968359","Alcool:  9.215190<br />Densite: 0.9969800","Alcool:  9.139241<br />Densite: 0.9971190","Alcool:  9.063291<br />Densite: 0.9972521","Alcool:  8.987342<br />Densite: 0.9973730","Alcool:  8.911392<br />Densite: 0.9974813","Alcool:  8.835443<br />Densite: 0.9975778","Alcool:  8.759494<br />Densite: 0.9976634","Alcool:  8.683544<br />Densite: 0.9977389","Alcool:  8.607595<br />Densite: 0.9978051","Alcool:  8.531646<br />Densite: 0.9978630","Alcool:  8.455696<br />Densite: 0.9979134","Alcool:  8.379747<br />Densite: 0.9979570","Alcool:  8.303797<br />Densite: 0.9979949","Alcool:  8.227848<br />Densite: 0.9980277","Alcool:  8.151899<br />Densite: 0.9980565","Alcool:  8.075949<br />Densite: 0.9980819","Alcool:  8.000000<br />Densite: 0.9981049","Alcool:  8.000000<br />Densite: 0.9981049"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(153,153,153,0.4)","hoveron":"points","hoverinfo":"x+y","showlegend":false,"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":26.228310502283108,"r":7.3059360730593621,"b":40.182648401826498,"l":54.794520547945211},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[7.7000000000000002,14.300000000000001],"tickmode":"array","ticktext":["8","10","12","14"],"tickvals":[8,10,12,14],"categoryorder":"array","categoryarray":["8","10","12","14"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Alcool","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.98662411899569102,1.0037274229049671],"tickmode":"array","ticktext":["0.990","0.995","1.000"],"tickvals":[0.98999999999999999,0.995,1],"categoryorder":"array","categoryarray":["0.990","0.995","1.000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Densite","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"b64e49da012e":{"x":{},"y":{},"type":"scatter"},"b64e78398e3":{"x":{},"y":{}}},"cur_data":"b64e49da012e","visdat":{"b64e49da012e":["function (y) ","x"],"b64e78398e3":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Nous donnons ici quelques références pour les graphiques en ggplot2 mais il existe de nombreuses ressources sur le web :</p>
<ul>
<li>Le livre <em>Ggplot2: Elegant Graphics for Data Analysis</em> de H. Wickham. <span class="citation" data-cites="ggplot2">(<a href="references.html#ref-ggplot2" role="doc-biblioref">Wickham 2016</a>)</span></li>
<li>Le <a href="https://ggplot2.tidyverse.org/" target="_blank">site web de ggplot2</a></li>
<li><a href="https://www.r-graph-gallery.com/ggplot2-package.html" target="_blank">The R Graph Gallery</a></li>
<li><a href="https://thinkr.fr/pdf/ggplot2-french-cheatsheet.pdf" target="_blank">The Cheat Sheet de ggplot 2</a></li>
</ul>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="le-package-rmarkdown" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="le-package-rmarkdown"><span class="header-section-number">4.2</span> Le package <strong>rmarkdown</strong> <img src="image/rmarkdown.jpg" class="class img-fluid" style="width:10.0%"></h2>
<p>L’extension <a href="https://rmarkdown.rstudio.com/index.html" target="_blank"><strong>Rmarkdown</strong></a> permet de créer des documents dans différents formats (html, pdf, docx, slides, …) qui contiennent du texte, du code (en R mais pas que!), les résultats, … L’utilisation de Rmarkdown permet d’obtenir un document final reproductible, associant code, résultats et commentaires. Le document peut être facilement regénéré et mis à jour (par exemple si les données étudiées ont été modifiées).</p>
<p>Nous allons donner ici des éléments de base pour la création de documents avec Rmarkdown. Pour plus de détails, vous pouvez consulter par exemple le livre en ligne <a href="https://bookdown.org/yihui/rmarkdown/" target="_blank">R Markdown: The Definitive Guide</a> de Y. Xie, J. J. Allaire, G. Grolemund. <span class="citation" data-cites="Rmarkdown">(<a href="references.html#ref-Rmarkdown" role="doc-biblioref">2018</a>)</span></p>
<section id="etapes-de-création-dun-document" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="etapes-de-création-dun-document"><span class="header-section-number">4.2.1</span> Etapes de création d’un document</h3>
<p>Un document Rmarkdown est un fichier enregistré avec l’extension <code>.Rmd</code>. Pour créer un nouveau document, allez dans <code>File-&gt; NewFile-&gt; Rmarkdown...</code> (ou cliquez sur l’icone nouveau document et choisissez Rmarkdown). La boîte de dialogue suivante s’ouvre :</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="image/creationRmarkdown.png" class="img-fluid figure-img" width="530"></p>
<figcaption class="figure-caption">Boite de dialogue Rmarkdown</figcaption>
</figure>
</div>
</div>
</div>
<p>Vous pouvez choisir le format du fichier final souhaité, préciser le titre et l’auteur (qui peuvent être modifiés ensuite si besoin). On peut remarquer que l’on peut aussi faire des présentations avec Rmarkdown et on peut utiliser des templates existants.</p>
<p><strong>Exercice</strong> :</p>
<blockquote class="blockquote">
<p>Créez un nouveau document Rmarkdown au format html avec le titre et l’auteur de votre choix. Vous pouvez constater qu’un nouveau document prérempli vient de s’ouvrir dans RStudio. Nous allons maintenant détailler le contenu de ce document.</p>
</blockquote>
<p>Un document Rmarkdown débute toujours par <strong>l’en-tête</strong> qui est encadré par 3 tirets <code>---</code>. Cet en-tête contient les métadonnées du document : le titre, l’auteur, la date, le format de sortie (<code>output</code>). Quelques éléments seront précisés dans la section <a href="#sectEnTete">Contenu de l’en-tête</a>.</p>
<p>On a ensuite le corps du document qui peut contenir</p>
<ul>
<li>du texte selon la syntaxe markdown (voir la section <a href="#sectMarkdown">Quelques éléments markdown</a>)</li>
<li>des blocs de code (appelés <em>chunks</em>) en R, Python, … (voir la section <a href="#sectChunk">Options des blocs de code</a>)</li>
<li>des formules mathématiques (écrites en latex entre <code>$ ... $</code>)</li>
<li>des images, tableaux, références, ….</li>
</ul>
<p>Vous pouvez compiler à tout moment le document Rmarkdown en cliquant sur le bouton <img src="image/Knit.png" class="class img-fluid" style="width:10.0%"> et de choisir le format de sortie voulu. Un onglet R Markdown s’ouvre alors dans la même zone que l’onglet <em>Console</em> pour indiquer la progression de la compilation et les messages d’erreur éventuels. Une fois la compilation effectuée, le document obtenu s’ouvre et vous pouvez admirer le rendu. Vous pouvez personnaliser le document de sortie en cliquant sur l’icone <img src="image/iconeParam.png" class="class img-fluid" style="width:7.0%"> et en choisissant <code>Output Options...</code>.</p>
<p><strong>Remarque</strong>:</p>
<blockquote class="blockquote">
<p>Pour la compilation d’un document en pdf, il est nécessaire d’avoir installé un compilateur de Latex sur son ordinateur. Si ce n’est pas le cas, vous pouvez utiliser l’extension <code>tinytex</code> (voir <a href="https://yihui.org/tinytex/" target="_blank">ici</a> pour plus de détails) <img src="image/logo-tinytex.png" class="class img-fluid" style="width:5.0%"></p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tinytex"</span>)</span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>tinytex<span class="sc">::</span><span class="fu">install.tinytex</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sectEnTete" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="sectEnTete"><span class="header-section-number">4.2.2</span> Contenu de l’en-tête</h3>
<p>Un document Rmarkdown débute par un en-tête entre <code>---</code> au format <a href="https://cran.r-project.org/web/packages/ymlthis/vignettes/yaml-fieldguide.html" target="_blank">YAML</a> contenant les métadonnées du document. Voici un exemple de base de préambule :</p>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>title<span class="sc">:</span> <span class="st">"Titre"</span></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>author<span class="sc">:</span> <span class="st">"Prénom Nom"</span></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>date<span class="sc">:</span> <span class="st">"31 aout 2020"</span></span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>output<span class="sc">:</span> html_document</span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Ici <code>output: html_document</code> indique le document final généré sera au format html. On peut modifier cette option par <code>pdf_document</code>pour un document pdf, <code>word_document</code> pour docx, et bien d’autres possibilités.</p>
<p>En executant la fonction <code>Sys.Date()</code> pour l’option <code>date</code>, la date sera remise à jour automatiquement à chaque compilation du document.</p>
<p>On peut préciser des options au document final en ajoutant des sous-options à droite du <code>output</code>. Il est également possible de spécifier des options différentes selon les formats. Voici un exemple :</p>
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>title<span class="sc">:</span> <span class="st">"Titre"</span></span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>author<span class="sc">:</span> <span class="st">"Prénom Nom"</span></span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>date<span class="sc">:</span> <span class="st">"`r Sys.Date()`"</span></span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a>output<span class="sc">:</span> </span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>  html_document <span class="sc">:</span></span>
<span id="cb154-7"><a href="#cb154-7" aria-hidden="true" tabindex="-1"></a>    toc <span class="sc">:</span> <span class="cn">TRUE</span></span>
<span id="cb154-8"><a href="#cb154-8" aria-hidden="true" tabindex="-1"></a>    toc_float <span class="sc">:</span> <span class="cn">TRUE</span></span>
<span id="cb154-9"><a href="#cb154-9" aria-hidden="true" tabindex="-1"></a>    number_sections <span class="sc">:</span> <span class="cn">TRUE</span></span>
<span id="cb154-10"><a href="#cb154-10" aria-hidden="true" tabindex="-1"></a>    fig_width <span class="sc">:</span> <span class="dv">4</span></span>
<span id="cb154-11"><a href="#cb154-11" aria-hidden="true" tabindex="-1"></a>  pdf_document <span class="sc">:</span> </span>
<span id="cb154-12"><a href="#cb154-12" aria-hidden="true" tabindex="-1"></a>    fig_caption<span class="sc">:</span> <span class="cn">TRUE</span></span>
<span id="cb154-13"><a href="#cb154-13" aria-hidden="true" tabindex="-1"></a>    highlight<span class="sc">:</span> kate</span>
<span id="cb154-14"><a href="#cb154-14" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Voici une liste avec quelques éléments :</p>
<ul>
<li><code>number_section : true</code> permet de numéroter les sections</li>
<li><code>highlight</code> permet de spécifier le style syntaxique (par ex <code>default</code>, <code>tango</code>, <code>pygments</code>, <code>kate</code>, …).</li>
<li>on peut ajouter son propre fichier de style .css avec l’option <code>css</code></li>
<li>on peut préciser des options concernant les figures avec <code>fig_width</code>, <code>fig_height</code>, <code>fig_caption</code>, <code>dev</code>, …</li>
<li>on peut ajouter une bibliographie à partir d’un fichier <code>.bib</code> avec l’option <code>bibliography</code></li>
</ul>
<p>Si vous utilisez la boite de dialogue des options du document de sortie <code>Output Options ...</code>, l’en-tête sera remis à jour pour suivre les options choisies.</p>
<p>Pour plus de détails voir le site détaillant les <a href="https://rmarkdown.rstudio.com/formats.html" target="_blank">R Markdown formats</a> et l’aide mémoire de Rmarkdown (accessible via <code>Help -&gt; Cheatsheets -&gt; Rmarkdown Cheat Sheet</code>).</p>
<p><strong>Exercice :</strong></p>
<blockquote class="blockquote">
<p>Créez un nouveau fichier Rmarkdown et enregistrez-le. Modifiez les options dans l’en-tête et compilez le document pour constater l’impact sur le document généré</p>
</blockquote>
</section>
<section id="sec-Markdown" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="sec-Markdown"><span class="header-section-number">4.2.3</span> Quelques éléments markdown</h3>
<p>Le texte d’un document Rmarkdown est régi par le langage markdown. Voici quelques éléments de syntaxe et de mise en forme</p>
<div id="fig-cheatsheetmarkdown" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="image/markdown.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;4.1: Extrait du Cheat Sheet de Rmarkdown</figcaption>
</figure>
</div>
<p><strong>Remarque:</strong> Si vous avez organisé votre document avec des sections / sous-sections en faisant débuter une ligne par un ou plusieurs <code>#</code>, alors vous pouvez cliquer sur l’icone <img src="image/iconeHeader.png" class="class img-fluid" style="width:5.0%"> à droite de la barre d’outils associée au fichier R Markdown pour visualiser la table des matières générée automatiquement qui vous permet de naviguer facilement dans le document.</p>
<p>Pour plus de détails, on peut aller voir</p>
<ul>
<li>sous RStudio, allez dans <code>Help -&gt; Markdown Quick Reference</code> : une fenêtre d’aide en bas à droite s’ouvre donnant les bases de syntaxe markdown</li>
<li>sous RStudio, allez dans <code>Help -&gt; Cheatsheets -&gt; R Markdown Cheat Sheet</code> qui permet d’aller consulter le <a href="https://github.com/rstudio/cheatsheets/raw/master/rmarkdown-2.0.pdf" target="_blank">document suivant</a>.</li>
<li>Consulter la page web du <a href="https://www.markdownguide.org/cheat-sheet/" target="_blank">markdown guide</a></li>
</ul>
</section>
<section id="sectChunk" class="level3" data-number="4.2.4">
<h3 data-number="4.2.4" class="anchored" data-anchor-id="sectChunk"><span class="header-section-number">4.2.4</span> Options des blocs de code (chunks)</h3>
<p>Pour insérer du code dans un document Rmarkdown, on utilise des blocs appelés <strong>chunk</strong>. Pour cela, il suffit de cliquer sur l’icone d’insertion d’un chunk <img src="image/iconeChunk.png" class="class img-fluid" style="width:10.0%"> dans la barre d’outils d’un document Rmarkdown. Il est possible d’insérer un chunk de code R mais pas seulement (par exemple on peut insérer du code Python). Pour du code R, un chunk de cette forme s’insère alors dans le document</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>On peut alors saisir du code R dans ce chunk. On peut ajouter un nom à un bloc juste après <code>r</code> (<code>{r nomdubloc}</code>). On peut également préciser des options dans les accolades <code>{r nomdubloc, ....}</code>, par exemple</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="image/optionschunk.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Quelques options des blocs de code (chunk)</figcaption>
</figure>
</div>
</div>
</div>
<!--
+ eval (TRUE par défaut, ou FALSE) : détermine si le code R doit être évalué ou non,
+ echo (TRUE par défaut, ou FALSE) : détermine si le code R doit être affiché ou non,
+ results ('markup' par défaut, 'hide', 'hold' ou 'asis') : détermine comment les sorties doivent être affichées,
+ error (FALSE par défaut, ou TRUE) : détermine si les messages d'erreur doivent être affichée,
+ warning (TRUE par défaut, ou FALSE) : détermine si les messages d'avertissement doivent être affichées.
-->
<p>Ces options peuvent être modifiées manuellement ou en utilisant l’interface graphique (en cliquant sur l’icone d’engrenage situé en haut à droite de chaque bloc).</p>
<p>Lorsque l’on veut appliquer une (des) option(s) à l’ensemble des blocs du document, on utilise la fonction <code>knitr::opts_chunk$set()</code> dans un bloc spécial appelé <code>setup</code> et qui est le premier bloc du document:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!--## Exercice

A FAIRE
-->
</section>
</section>
<section id="rédaction-avec-quarto" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="rédaction-avec-quarto"><span class="header-section-number">4.3</span> Rédaction avec <strong>Quarto</strong> <img src="image/quarto.png" class="class img-fluid" style="width:20.0%"></h2>
<p><img src="image/quarto-illustration.png" class="class img-fluid" style="width:70.0%"></p>
<p><a href="https://quarto.org/" target="_blank"><strong>Quarto</strong></a> est la nouvelle génération de Rmarkdown. Les documents Quarto ressemblent beaucoup aux documents Rmarkdown. Il y a un en-tête YAML, des morceaux de textes et de code, un formatage avec des balises markdown, … Mais Quarto permet une interface en ligne de commande, la possibilité d’utiliser de nombreux langages (y compris Python, bash, Julia, etc.), et l’ouverture vers d’autres fonctionnalités qui n’étaient pas possibles dans RMarkdown. Quarto n’est pas un package R, c’est un logiciel qui peut s’utiliser avec RStudio, Jupyter, …. Il s’installe automatiquement lors de l’installation de RStudio.</p>
<p>Comme Rmarkdown, il permet de créer des documents dans différents formats (html, pdf, docx, slides, …) qui contiennent du texte, du code (en R, en python, …), les résultats, … L’utilisation de Quarto permet d’obtenir un document final reproductible, associant code, résultats et commentaires. Le document peut être facilement regénéré et mis à jour.</p>
<p>Nous allons donner ici des éléments de base pour la création de documents avec Quarto. Pour plus de détails, vous pouvez consulter le <a href="https://quarto.org/docs/guide/" target="_blank">guide en ligne de Quarto</a>.</p>
<section id="etapes-de-création-dun-document-1" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="etapes-de-création-dun-document-1"><span class="header-section-number">4.3.1</span> Etapes de création d’un document</h3>
<p>Un document Quarto est un fichier enregistré avec l’extension <code>.qmd</code>. Pour créer un nouveau document, allez dans <code>File-&gt; NewFile-&gt; Quarto Document ...</code> (ou cliquez sur l’icone nouveau document et choisissez Quarto Document…). La boîte de dialogue suivante s’ouvre :</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="image/creationQuarto.png" class="img-fluid" width="531"></p>
</div>
</div>
<p>Vous pouvez choisir le format du fichier final souhaité, préciser le titre et l’auteur (qui peuvent être modifiés ensuite si besoin). On peut remarquer que l’on peut aussi faire des présentations avec Quarto et on peut utiliser des templates existants (<a href="https://quarto.org/docs/gallery/" target="_blank">voir exemples</a>).</p>
<p><strong>Exercice</strong> :</p>
<blockquote class="blockquote">
<p>Créez un nouveau document Quarto au format html avec le titre et l’auteur de votre choix. Vous pouvez constater qu’un nouveau document vient de s’ouvrir dans RStudio avec un en-tête YAML.</p>
</blockquote>
<p>Un document Quarto débute toujours par <strong>l’en-tête</strong> qui est encadré par 3 tirets <code>---</code>. Cet en-tête contient les métadonnées du document : le titre, l’auteur, la date, le format de sortie (<code>format</code>). Quelques éléments seront précisés dans la section <a href="#sectQuartoEnTete">Contenu de l’en-tête</a>.</p>
<p>On a ensuite le corps du document qui peut contenir</p>
<ul>
<li>du texte selon la syntaxe markdown (voir la section <a href="#sectMarkdown">Quelques éléments markdown</a>) comme en Rmarkdown.</li>
<li>des blocs de code (appelés <em>chunks</em>) en R, Python, … (voir la section <a href="#sectQuartoChunk">Options des blocs de code</a>)</li>
<li>des formules mathématiques (écrites en latex entre <code>$ ... $</code>)</li>
<li>des images, tableaux, références, ….</li>
</ul>
<p>Vous pouvez compiler à tout moment le document Quarto en cliquant sur le bouton <img src="image/Render.png" class="class img-fluid" style="width:10.0%">. La progression de la compilation s’affiche alors dans l’onglet <em>Background Jobs</em> dans la même zone que l’onglet <em>Console</em>. Une fois la compilation effectuée, le document obtenu s’ouvre et vous pouvez admirer le rendu.</p>
<p><strong>Remarque</strong>: Pour la compilation d’un document en pdf, il est nécessaire d’avoir installé un compilateur de Latex sur son ordinateur.</p>
</section>
<section id="sectQuartoEnTete" class="level3" data-number="4.3.2">
<h3 data-number="4.3.2" class="anchored" data-anchor-id="sectQuartoEnTete"><span class="header-section-number">4.3.2</span> Contenu de l’en-tête</h3>
<p>Un document Quarto débute par un en-tête entre <code>---</code> au format <a href="https://cran.r-project.org/web/packages/ymlthis/vignettes/yaml-fieldguide.html" target="_blank">YAML</a> contenant les métadonnées du document. Il y a quelques différences avec l’en-tête d’un document Rmarkdown. Attention, il faut bien respecter l’indentation.</p>
<div class="columns">
<div class="column" style="width:40%;">
<p>Avec Quarto</p>
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>title<span class="sc">:</span> <span class="st">"Titre"</span></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>author<span class="sc">:</span> <span class="st">"Prénom Nom"</span></span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>date<span class="sc">:</span> <span class="st">"31 aout 2020"</span></span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a>format<span class="sc">:</span> </span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a>  html<span class="sc">:</span></span>
<span id="cb157-7"><a href="#cb157-7" aria-hidden="true" tabindex="-1"></a>    toc<span class="sc">:</span> <span class="cn">TRUE</span></span>
<span id="cb157-8"><a href="#cb157-8" aria-hidden="true" tabindex="-1"></a>    number_sections<span class="sc">:</span> <span class="cn">TRUE</span></span>
<span id="cb157-9"><a href="#cb157-9" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<p>Avec Rmarkdown</p>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>title<span class="sc">:</span> <span class="st">"Titre"</span></span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>author<span class="sc">:</span> <span class="st">"Prénom Nom"</span></span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a>date<span class="sc">:</span> <span class="st">"31 aout 2020"</span></span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a>output<span class="sc">:</span> </span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a>  html_document<span class="sc">:</span></span>
<span id="cb158-7"><a href="#cb158-7" aria-hidden="true" tabindex="-1"></a>    toc<span class="sc">:</span> <span class="cn">TRUE</span></span>
<span id="cb158-8"><a href="#cb158-8" aria-hidden="true" tabindex="-1"></a>    number_sections<span class="sc">:</span> <span class="cn">TRUE</span></span>
<span id="cb158-9"><a href="#cb158-9" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>On peut préciser des options au document final en ajoutant des sous-options à droite du <code>format</code>. Il est également possible de spécifier des options différentes selon les formats.</p>
<p>On peut par exemple jouer sur les sections et la table des matière avec</p>
<ul>
<li><code>number_section : true</code> permet de numéroter les sections</li>
<li><code>number_depth: 3</code> pour adapter la profondeur de numérotation</li>
<li><code>toc: true</code> pour avoir une table des matières</li>
<li><code>toc-depth: 2</code> pour gérer la profondeur de la table des matières</li>
<li><code>toc-title: Contents</code> pour modifier le titre de la table des matières</li>
</ul>
<p>On peut ajouter une bibliographie à partir d’un fichier <code>.bib</code> avec l’option <code>bibliography</code>, utiliser un style via un fichier <code>.css</code>ou <code>.scss</code> avec l’option <code>css</code>, …. Pour plus de détails voir le <a href="https://quarto.org/docs/guide/" target="_blank">guide de Quarto</a> et l’aide mémoire de Quarto (<a href="https://rstudio.github.io/cheatsheets/quarto.pdf" target="_blank">Cheatsheets</a>).</p>
<p><strong>Exercice :</strong></p>
<blockquote class="blockquote">
<p>Ouvrez le fichier <code>Data/ExempleQuarto.qmd</code>. Modifiez les options dans l’en-tête et compilez-le pour constater l’impact sur le document généré.</p>
</blockquote>
</section>
<section id="contenu-du-document" class="level3" data-number="4.3.3">
<h3 data-number="4.3.3" class="anchored" data-anchor-id="contenu-du-document"><span class="header-section-number">4.3.3</span> Contenu du document</h3>
<section id="texte-par-markdown" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="texte-par-markdown">Texte par markdown</h4>
<p>Le texte d’un document Quarto est régi par le langage markdown. Ce sont les mêmes éléments de syntaxes qu’en Rmarkdown, voici la figure <a href="#fig-cheatsheetmarkdown">Figure&nbsp;<span>4.1</span></a> et la section <a href="#sec-Markdown"><span>Section&nbsp;4.2.3</span></a>.</p>
</section>
<section id="insertion-de-code" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="insertion-de-code">Insertion de code</h4>
<p>Pour insérer du code dans un document Quarto, on utilise aussi des blocs appelés <strong>chunk</strong>. Pour cela, il suffit de cliquer sur l’icone d’insertion d’un chunk <img src="image/iconeChunk.png" class="class img-fluid" style="width:10.0%">. Il est possible d’insérer un chunk de code R mais pas seulement (par exemple on peut insérer du code Python). On peut alors saisir du code R dans ce chunk. On peut également préciser des options avec la syntaxe <code>#|....</code> en dehors de l’accolade <code>{r}</code> (grande différence avec Rmarkdown mais Quarto s’adapte au code du Rmarkdown). Voici quelques options d’execution :</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">option</th>
<th style="text-align: left;">effet</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">echo</td>
<td style="text-align: left;">include le code ou pas</td>
</tr>
<tr class="even">
<td style="text-align: left;">eval</td>
<td style="text-align: left;">evalue le code ou pas</td>
</tr>
<tr class="odd">
<td style="text-align: left;">warning</td>
<td style="text-align: left;">affiche les warnings ou pas</td>
</tr>
<tr class="even">
<td style="text-align: left;">message</td>
<td style="text-align: left;">affiche les messages ou pas</td>
</tr>
<tr class="odd">
<td style="text-align: left;">error</td>
<td style="text-align: left;">include les erreurs et poursuit ou pas</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sourceCode" id="cb159"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Pour appliquer une option sur tous les chunk du document, il faut le préciser dans l’en-tête dans la partie execute</p>
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>title<span class="sc">:</span> <span class="st">"Titre"</span></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>author<span class="sc">:</span> <span class="st">"Prénom Nom"</span></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a>date<span class="sc">:</span> <span class="st">"31 aout 2020"</span></span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a>format<span class="sc">:</span> </span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a>  html<span class="sc">:</span></span>
<span id="cb160-7"><a href="#cb160-7" aria-hidden="true" tabindex="-1"></a>    toc<span class="sc">:</span> <span class="cn">TRUE</span></span>
<span id="cb160-8"><a href="#cb160-8" aria-hidden="true" tabindex="-1"></a>    number_sections<span class="sc">:</span> <span class="cn">TRUE</span></span>
<span id="cb160-9"><a href="#cb160-9" aria-hidden="true" tabindex="-1"></a>execute<span class="sc">:</span> </span>
<span id="cb160-10"><a href="#cb160-10" aria-hidden="true" tabindex="-1"></a>  echo<span class="sc">:</span> true</span>
<span id="cb160-11"><a href="#cb160-11" aria-hidden="true" tabindex="-1"></a>  warning<span class="sc">:</span> false</span>
<span id="cb160-12"><a href="#cb160-12" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="insertion-dune-figure" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="insertion-dune-figure">Insertion d’une figure</h4>
<p>Pour insérer une image (.png, jpeg, …), on peut utiliser la syntaxe</p>
<p><code>![CAP]{image.png}{#fig-LABEL fig-alt="ALT"}</code></p>
<p>On peut aussi créer une image par du code, par exemple faire un graphique avec ggplot2.</p>
<p>On peut utiliser des options pour la mise en forme dont</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">option</th>
<th style="text-align: left;">effet</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">fig-align</td>
<td style="text-align: left;">Alignement horizontal de la figure (left, right, center)</td>
</tr>
<tr class="even">
<td style="text-align: left;">fig-cap</td>
<td style="text-align: left;">Enoncé de la légende</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fig-height</td>
<td style="text-align: left;">Hauteur de la figure</td>
</tr>
<tr class="even">
<td style="text-align: left;">fig-width</td>
<td style="text-align: left;">Largeur de la figure</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Pour plus de détails et de possibilités, vous pouvez consulter la <a href="https://quarto.org/docs/authoring/figures.html" target="_blank">page suivante</a>.</p>
</section>
<section id="insertion-dun-tableau" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="insertion-dun-tableau">Insertion d’un tableau</h4>
<p>Pour insérer un tableau, on peut le créer dans le texte avec la syntaxe markdown :</p>
<div class="columns">
<div class="column" style="width:40%;">
<p>Ecriture dans le fichier .qmd</p>
<pre><code>| First Header | Second Header |
|--------------|---------------|
| Content Cell | Content Cell  |
| Content Cell | Content Cell  |</code></pre>
</div><div class="column" style="width:40%;">
<p>Rendu à la compilation</p>
<div id="tbl-LABEL" class="anchored">
<table class="table">
<caption>Table&nbsp;4.1: CAPTION</caption>
<thead>
<tr class="header">
<th>First Header</th>
<th>Second Header</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
<tr class="even">
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>On peut aussi utiliser la fonction <code>knitr::kable()</code> sur un data.frame</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>``{r}</span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>#| label: tbl-LABEL</span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a>#| tbl-cap: CAPTION</span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a>df&lt;-data.frame( ..... )</span>
<span id="cb162-6"><a href="#cb162-6" aria-hidden="true" tabindex="-1"></a>knitr::kable(df)</span>
<span id="cb162-7"><a href="#cb162-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>On peut utiliser des options pour la mise en forme dont</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 21%">
<col style="width: 78%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">option</th>
<th style="text-align: left;">effet</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">tbl-colwidths</td>
<td style="text-align: left;">Pour spécifier la largeur des colonnes</td>
</tr>
<tr class="even">
<td style="text-align: left;">tbl-cap</td>
<td style="text-align: left;">Pour spécifier la légende du tableau</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tbl-cap-location</td>
<td style="text-align: left;">Pour spécifier la position de la légende (top,bottom,margin)</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Pour plus de détails, vous pouvez consulter la <a href="https://quarto.org/docs/authoring/tables.html" target="_blank">page suivante.</a>.</p>
</section>
<section id="callout-blocks" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="callout-blocks">Callout blocks</h4>
<p>Une nouveauté avec Quarto est de pouvoir mettre en avant des éléments par des blocs appelés <strong>Callout blocks</strong>.</p>
<p>Il y a 5 types de blocs : <code>tip</code>, <code>note</code>, <code>warning</code>, <code>caution</code> et <code>important</code>.</p>
<p><img src="image/Callouts.png" class="img-fluid"></p>
<p>La syntaxe pour les utiliser est la suivante :</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip}</span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">## Title</span></span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>Texte, code, ....</span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a>:::</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>On peut modifier l’apparence avec l’option <code>appearance=</code></p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 9%">
<col style="width: 90%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">option</th>
<th style="text-align: left;">effet</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">default</td>
<td style="text-align: left;">apparence par défaut avec un en-tête coloré et une icône</td>
</tr>
<tr class="even">
<td style="text-align: left;">simple</td>
<td style="text-align: left;">apparence sans arrière-plan d’en-tête coloré</td>
</tr>
<tr class="odd">
<td style="text-align: left;">minimal</td>
<td style="text-align: left;">apparence avec des bordures sans couleur d’arrière-plan d’en-tête ou d’icône</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>On peut aussi juste supprimer l’icone avec l’option <code>icon=false</code>.</p>
</section>
</section>
</section>
<section id="le-package-reticulate-pour-python" class="level2 tabset" data-number="4.4">
<h2 class="tabset anchored" data-number="4.4" data-anchor-id="le-package-reticulate-pour-python"><span class="header-section-number">4.4</span> Le package <strong>reticulate</strong> pour Python <img src="image/reticulate.png" class="class img-fluid" style="width:10.0%"></h2>
<p>Il est possible d’executer du code Python sous Rstudio, de compiler un document Rmarkdown contenant à la fois du code Python et du code R, écrire des scripts python, …</p>
<p>L’interface R pour faire du Python est le package <a href="https://rstudio.github.io/reticulate/" target="_blank"><code>reticulate</code></a>. Il fournit un ensemble d’outils pour l’inter-opérabilité entre Python et R, il comprend des fonctionnalités pour :</p>
<ul>
<li><p>appeler Python à partir de R de différentes manières, y compris R Markdown, importer des modules Python, utiliser Python de manière interactive dans une session R, …</p></li>
<li><p>faire l’articulation entre les objets R et Python (par exemple, entre les data.frames de R et Pandas, ou entre les matrices R et les tableaux NumPy).</p></li>
<li><p>faire la liaison à différentes versions de Python, y compris les environnements Virtual et les environnements Conda.</p></li>
</ul>
<p>Par défaut, <code>reticulate</code> utilise la version de Python indiquée dans le PATH (<code>Sys.which("python")</code>) mais il est possible de lui spécifier une autre version de python à l’aide de la fonction <code>use_python("...")</code>. On peut aussi utiliser `<code>use_virtualenv("...")</code> ou <code>use_condaenv("...")</code> pour Virtual et Conda respectivement.</p>
<p>On peut installer des packages de python avec les commandes <code>pip</code> ou <code>conda</code>.</p>
<p>On peut intégrer du python de différentes façons</p>
<ul>
<li>Des chunks Python dans un document Rmarkdown (<code>{python} ....</code>)</li>
<li>Communication bidirectionnelle entre R et Python (les fonctions de R peuvent accéder aux objets python et inversement) :
<ul>
<li>pour utiliser un objet python (<em>objectpy</em>) avec R, on utilise <code>py</code> (<em>py$objectpy</em>)</li>
<li>pour utiliser un objet R (<em>objectR</em>) avec python, on utilise <code>r</code> (<em>r.objectR</em>)</li>
</ul></li>
<li>Appel d’un module Python avec la commande <code>import()</code></li>
<li>Appel d’une fonction python avec la commande <code>source_python("nomfonction.py")</code> (comme la commande <code>source()</code>pour R)</li>
<li>Passer à une console python interactive avec la fonction <code>repl_python()</code> dans une session de R.</li>
</ul>
<p>Deux exemples d’échanges entre R et Python sont disponibles ci-dessous.</p>
<section id="exemple-1" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="exemple-1"><span class="header-section-number">4.4.1</span> Exemple 1</h3>
<div class="sourceCode" id="cb164"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reticulate)</span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a>WineR<span class="ot">=</span><span class="fu">read.table</span>(<span class="st">"../Data/wine.txt"</span>,<span class="at">header=</span>T)</span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(WineR)</span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb164-6"><a href="#cb164-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(WineR,<span class="fu">aes</span>(<span class="at">x =</span> Alcool, <span class="at">y =</span> Densite)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span>
<span id="cb164-7"><a href="#cb164-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb165"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>WinePy <span class="op">=</span> r.WineR</span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>WinePy.head()</span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">"darkgrid"</span>)</span>
<span id="cb165-7"><a href="#cb165-7" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">20</span>, <span class="dv">6</span>))</span>
<span id="cb165-8"><a href="#cb165-8" aria-hidden="true" tabindex="-1"></a>plt.scatter(WinePy[<span class="st">"Alcool"</span>],WinePy[<span class="st">"Densite"</span>])</span>
<span id="cb165-9"><a href="#cb165-9" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="exemple-2" class="level3" data-number="4.4.2">
<h3 data-number="4.4.2" class="anchored" data-anchor-id="exemple-2"><span class="header-section-number">4.4.2</span> Exemple 2</h3>
<div class="sourceCode" id="cb166"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> {i : np.random.randn() <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>)}</span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb167"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as.data.frame</span>(py<span class="sc">$</span>a))</span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-wickham2014tidy" class="csl-entry" role="listitem">
Wickham, H. et al. 2014. <span>“Tidy Data.”</span> <em>Journal of Statistical Software</em> 59 (10): 1–23.
</div>
<div id="ref-ggplot2" class="csl-entry" role="listitem">
Wickham, H. 2016. <em>Ggplot2: Elegant Graphics for Data Analysis</em>. springer.
</div>
<div id="ref-RDataScience" class="csl-entry" role="listitem">
Wickham, H., and G. Grolemund. 2016. <em>R for Data Science: Import, Tidy, Transform, Visualize, and Model Data</em>. " O’Reilly Media, Inc.". <a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz/</a>.
</div>
<div id="ref-Rmarkdown" class="csl-entry" role="listitem">
Xie, Y., J. J. Allaire, and G. Grolemund. 2018. <em>R Markdown: The Definitive Guide</em>. CRC Press.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Part3-StatR.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Statistique avec R</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link">
        <span class="nav-page-text">References</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>